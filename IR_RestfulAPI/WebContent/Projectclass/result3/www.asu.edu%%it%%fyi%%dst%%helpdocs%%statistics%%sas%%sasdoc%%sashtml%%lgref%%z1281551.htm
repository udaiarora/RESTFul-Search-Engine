<HTML>
<!-- This page produced Mon Jul 19 13:58:41 EDT 1999
 -->
<!-- Used program version 1.118.1.2 from beta -->
<HEAD>
<!-- <META http-equiv="Content-Type" content="text/html; charset="> -->
<TITLE>Functions and CALL Routines : Using Functions </TITLE></HEAD>
<BODY bgcolor="#FFFFFF">
<!-- navigation -->
<TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0245852.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="znid-568.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="z1281561.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
</TR></TABLE>
<!-- running head -->
<TABLE width="100%" cellpadding="4">
<TR valign="MIDDLE">
<TD bgcolor="#CCCC99"><I><FONT size="2">SAS Language Reference: Dictionary                                                                                        </FONT></I></TD>
</TR>
</TABLE><H1><FONT size="5"><A name="z1281551">Using Functions</A></FONT></H1>


<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5">Restrictions on Function Arguments</FONT></B></TD></TR></TABLE>
If the value of an argument is
invalid, SAS prints an error message
and sets the result to a missing value. Here are some  common restrictions
on function arguments: 
<UL>

<LI>Some functions require that their arguments be restricted within
a certain range. For example, the argument of the LOG function must be greater
than 0. <P>

<LI>Most functions do not permit missing values as arguments. Exceptions
include some of the descriptive statistics functions and financial functions.<P>

<LI>In general, the allowed range of the arguments is platform-dependent,
such as with the EXP function.<P>

<LI>For some probability functions, combinations of extreme values
can cause convergence problems. <P>
</UL>

<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5">Characteristics of Target Variables</FONT></B></TD></TR></TABLE>

<P>Some character functions
produce resulting variables, or <B>target variables</B>, with a default
length of 200 bytes. Numeric target variables have a default length of 8.
Character functions to which the default target variable lengths do not apply
are shown in the following table. 
<P>
<TABLE cellpadding="6" cellspacing="0" border="1">
<CAPTION align="top"><B><I><A name="znid-585">Target Variables</A></I></B></CAPTION>


<TR valign="bottom" bgcolor="#CCCCCC">
  <TH  align="LEFT" valign="BOTTOM" ><B>Function </B></TH>
  <TH  align="LEFT" valign="BOTTOM" ><B>Target Variable Type </B></TH>
  <TH  align="LEFT" valign="BOTTOM" ><B>Target Variable Length (bytes)</B></TH>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">BYTE </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">1</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">COMPRESS </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">length of first argument</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">INPUT </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">width of informat</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP"><BR></TD>
  
<TD  align="LEFT" valign="TOP">numeric</TD>
  
<TD  align="LEFT" valign="TOP">8</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">LEFT </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">length of argument</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">PUT </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">width of format</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">REVERSE </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">length of argument</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">RIGHT </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">length of argument</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">SUBSTR </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">length of first argument</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">TRANSLATE </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">length of first argument</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">TRIM </TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">length of argument</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">UPCASE, LOWCASE</TD>
  
<TD  align="LEFT" valign="TOP">character </TD>
  
<TD  align="LEFT" valign="TOP">length of argument</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  align="LEFT" valign="TOP">VTYPE, VTYPEX</TD>
  
<TD  align="LEFT" valign="TOP">character</TD>
  
<TD  align="LEFT" valign="TOP">1</TD>
</TR>

</TABLE>

<BR>
<P>
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5">Notes on Descriptive Statistic Functions</FONT></B></TD></TR></TABLE>

<P>SAS provides functions that return descriptive statistics. Except
for the MISSING function, the functions correspond to the statistics produced
by the MEANS procedure.  The computing method for each statistic is discussed
in  "SAS Elementary Statistics Procedures" in of the         
                  
<B>SAS Procedures Guide</B>. SAS calculates descriptive statistics for
the nonmissing values of the arguments.
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5">Notes on Financial Functions</FONT></B></TD></TR></TABLE>

<P>SAS provides
a group of functions that perform financial calculations. The functions are
grouped into the following types: 
<P>
<TABLE cellpadding="6" cellspacing="0" border="0">
<CAPTION align="top"><B><I><A name="znid-586">Types of Financial Functions</A></I></B></CAPTION>


<TR valign="bottom" bgcolor="#CCCCCC">
  <TH  colspan="2" align="LEFT" valign="BOTTOM" ><B>Function type</B></TH>
  <TH  align="LEFT" valign="BOTTOM" ><B>Functions</B></TH>
  <TH  align="LEFT" valign="BOTTOM" ><B>Description</B></TH>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP">Cashflow</TD>
  
<TD  align="LEFT" valign="TOP">CONVX, CONVXP<P><BR></TD>
  
<TD  align="LEFT" valign="TOP">calculates convexity for cashflows</TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP"><BR></TD>
  
<TD  align="LEFT" valign="TOP">DUR, DURP</TD>
  
<TD  align="LEFT" valign="TOP">calculates modified duration for cashflows<P><BR></TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP"><BR></TD>
  
<TD  align="LEFT" valign="TOP">PVP, YIELDP</TD>
  
<TD  align="LEFT" valign="TOP">calculates present value and yield-to-maturity for a periodic cashflow<P><BR></TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP">Parameter calculations</TD>
  
<TD  align="LEFT" valign="TOP">COMPOUND</TD>
  
<TD  align="LEFT" valign="TOP">calculates compound interest parameters<P><BR></TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP"><BR></TD>
  
<TD  align="LEFT" valign="TOP">MORT</TD>
  
<TD  align="LEFT" valign="TOP">calculates amortization parameters<P><BR></TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP">Internal rate of return</TD>
  
<TD  align="LEFT" valign="TOP">INTRR, IRR</TD>
  
<TD  align="LEFT" valign="TOP">calculates the internal rate of return<P><BR></TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP">Net present and future value<P><BR></TD>
  
<TD  align="LEFT" valign="TOP">NETPV, NPV</TD>
  
<TD  align="LEFT" valign="TOP">calculates net present and future values </TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP"><BR></TD>
  
<TD  align="LEFT" valign="TOP">SAVING</TD>
  
<TD  align="LEFT" valign="TOP">calculates the future value of periodic saving<P><BR></TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP">Depreciation </TD>
  
<TD  align="LEFT" valign="TOP">DACCxx</TD>
  
<TD  align="LEFT" valign="TOP">calculates the accumulated depreciation up to the specified period<P><BR></TD>
</TR>


<TR valign="top" bgcolor="#FFFFFF">
  
<TD  colspan="2" align="LEFT" valign="TOP"><BR></TD>
  
<TD  align="LEFT" valign="TOP">DEPxxx </TD>
  
<TD  align="LEFT" valign="TOP">calculates depreciation for a single period</TD>
</TR>

</TABLE>

<BR>
<BR><H3>Special Considerations for Depreciation Functions</H3>


<P>The
period argument for depreciation functions can be fractional for all of the
functions except DEPDBSL and DACCDBSL. For fractional arguments, the depreciation
is prorated between the two consecutive time periods preceding and following
the fractional period. <DL>
<DT><B><FONT color="FF00007">CAUTION:</FONT></B></DT><DD><B>Verify the depreciation method for fractional periods. </B>
You must verify whether this method is appropriate to use
with fractional periods because many depreciation schedules, specified as
tables, have special rules for fractional periods.&nbsp;&nbsp;<IMG border="0" src="../common/images/cautend.gif" alt="[cautionend]" align="bottom"></DD></DL>
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5">Using DATA Step Functions within Macro Functions</FONT></B></TD></TR></TABLE>

<P>The macro functions %SYSFUNC and %QSYSFUNC can call DATA
step functions to generate text in the macro facility.  %SYSFUNC and %QSYSFUNC
have one difference: %QSYSFUNC masks special characters and mnemonics and
%SYSFUNC does not. For more information on these functions, see %QSYSFUNC
and %SYSFUNC in                            
<B>SAS Macro Language: Reference</B>.
<P>%SYSFUNC arguments are a single DATA step function and an optional format,
as shown in the following examples:  



<PRE>%sysfunc(date(),worddate.)
%sysfunc(attrn(&amp;dsid,NOBS))</PRE>
<P>You cannot nest DATA step functions within %SYSFUNC. However, you can
nest %SYSFUNC functions that call DATA step functions. For example:



<PRE>%sysfunc(compress(%sysfunc(getoption(sasautos)),
   %str(%)%(%')));</PRE>
<P>All arguments in DATA step functions within %SYSFUNC must be separated
by commas.  You cannot use argument lists that are preceded by the word OF.
<P>Because %SYSFUNC is a macro function, you do not need to enclose character
values in quotation marks as you do in DATA step functions. For example, the
arguments to the OPEN function are enclosed in quotation marks when you use
the function alone, but the arguments do not require quotation marks when
used within %SYSFUNC.  



<PRE>dsid=open("sasuser.houses","i");
dsid=open("&amp;mydata","&amp;mode");
%let dsid=%sysfunc(open(sasuser.houses,i));
%let dsid=%sysfunc(open(&amp;mydata,&amp;mode));</PRE>
<P>You can use these functions to call all of the DATA step SAS functions
except those that pertain to DATA step variables or processing. These prohibited
functions are: DIF, DIM, HBOUND, INPUT, IORCMSG, LAG, LBOUND, MISSING, PUT,
RESOLVE, SYMGET, and all of the variable information functions (for example,
VLABEL).
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5">Using Functions to Manipulate Files</FONT></B></TD></TR></TABLE>

<P>
 SAS manipulates files in different ways, depending on whether
you use functions or statements. If you use functions such as FOPEN, FGET,
and FCLOSE, you have more opportunity to examine and manipulate your data
than when you use statements such as INFILE, INPUT, and PUT. 
<P>When you use external files, the FOPEN function allocates a buffer called
the File Data Buffer (FDB) and opens the external file for reading or updating.
The FREAD function reads a record from the external file and copies the data
into the FDB. The FGET function then moves the data to the DATA step variables.
The function returns a value that you can check with statements or other functions
in the DATA step to determine how to further process your data. After the
records are processed, the FWRITE function writes the contents of the FDB
to  the external file, and the FCLOSE function closes the file.  
<P>When you use  SAS data sets, the OPEN function opens the data set. The
FETCH and FETCHOBS functions read observations from an open SAS data set into
the Data Set Data Vector (DDV). The GETVARC and GETVARN functions then move
the data to DATA step variables. The functions return a value that you can
check with statements or other functions in the DATA step to determine how
you want to further process your data. After the data is processed, the CLOSE
function closes the data set. 
<P>For a complete listing of functions and CALL routines, see <A href="z0245860.htm">Functions and CALL Routines by Category</A>   
. For complete descriptions and examples, see the dictionary section of this
book. 

<P><!-- navigation -->
<P><TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0245852.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="znid-568.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="z1281561.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
<TD align="center">
<A href="#z1281551">
<IMG border="0" SRC="../common/images/top1.gif"><BR><FONT size="-2">Top of Page</FONT></A></TD>
</TR></TABLE>
<P><FONT size=1><A href="../common/images/copyrite.htm">Copyright 1999 by SAS Institute Inc., Cary, NC, USA. All rights reserved.</A></FONT>
</BODY>
</HTML>