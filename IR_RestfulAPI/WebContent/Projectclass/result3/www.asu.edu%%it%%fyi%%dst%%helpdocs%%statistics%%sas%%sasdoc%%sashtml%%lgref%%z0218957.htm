<HTML>
<!-- This page produced Mon Jul 19 13:58:41 EDT 1999
 -->
<!-- Used program version 1.118.1.2 from beta -->
<HEAD>
<!-- <META http-equiv="Content-Type" content="text/html; charset="> -->
<TITLE>Statements : FILENAME, SOCKET Access Method </TITLE></HEAD>
<BODY bgcolor="#FFFFFF">
<!-- navigation -->
<TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0293668.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z0178980.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="z0223242.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
</TR></TABLE>
<!-- running head -->
<TABLE width="100%" cellpadding="4">
<TR valign="MIDDLE">
<TD bgcolor="#CCCC99"><I><FONT size="2">FILENAME, SOCKET Access Method</FONT></I></TD>
</TR>
</TABLE><H1><FONT size="5"><A name="z0218957">FILENAME, SOCKET Access Method</A></FONT></H1>

<P><HR><BR><B>Allows you to read from or write to a TCP/IP socket</B><p>

<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B>Valid:</B></TD>
<TD bgcolor="#CCCCCC" align="left">anywhere
</TD></TR>
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B>Category:</B></TD>
<TD bgcolor="#CCCCCC" align="left">Data Access
</TD></TR>
</TABLE><HR>
<TABLE cellspacing="0" cellpadding="1">
<TR>
<TD colspan="2"><A href="z0218957.htm#zid-2355"><FONT size="2"><B>Syntax</b></FONT></A></TD></TR>
<TR>
<TD colspan="2"><A href="z0218957.htm#z0227142"><FONT size="2"><B>Arguments</b></FONT></A></TD></TR>
<TR>
<TD colspan="2"><A href="z0218957.htm#z0224951"><FONT size="2"><B>TCPIP-Options</b></FONT></A></TD></TR>
<TR>
<TD colspan="2"><A href="z0218957.htm#z0176114"><FONT size="2"><B>Details</b></FONT></A></TD></TR>
<TR>
<TD width="18"></TD>
<TD><A href="z0218957.htm#z0176127"><FONT size="2">The Basics</FONT></A></TD></TR>
<TR>
<TD width="18"></TD>
<TD><A href="z0218957.htm#z0176122"><FONT size="2"><IMG border="0" src=" ../common/images/sym01.gif" alt="[1]">Using the SOCKET Access Method in Client Mode</FONT></A></TD></TR>
<TR>
<TD width="18"></TD>
<TD><A href="z0218957.htm#z0176123"><FONT size="2"><IMG border="0" src=" ../common/images/sym02.gif" alt="[2]">Using the SOCKET Access Method in Server Mode</FONT></A></TD></TR>
<TR>
<TD colspan="2"><A href="z0218957.htm#z0227143"><FONT size="2"><B>Examples</b></FONT></A></TD></TR>
<TR>
<TD width="18"></TD>
<TD><A href="z0218957.htm#z0227144"><FONT size="2">Example 1:  Communicating between Two SAS Applications over a TCP/IP Socket</FONT></A></TD></TR>
<TR>
<TD colspan="2"><A href="z0218957.htm#z0227145"><FONT size="2"><B>See Also</b></FONT></A></TD></TR></TABLE>
<TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><H2><A name="zid-2355">Syntax</A></H2></TD></TR></TABLE>

<TABLE cellpadding="4" cellspacing="2">
<TR valign="top"><TD>
<IMG border="0" src=" ../common/images/sym01.gif" alt="[1]"><B>FILENAME </B> <I>fileref</I> SOCKET
'<I>hostname</I>:<I>portno</I>' 
<BR>&lt;<I>tcpip-options</I>&gt;;
</TD></TR></TABLE>
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top"><TD>
<IMG border="0" src=" ../common/images/sym02.gif" alt="[2]"><B>FILENAME </B> <I>fileref</I> SOCKET
':<I>portno</I>' SERVER
<BR>&lt;<I>tcpip-options</I>&gt;;
</TD></TR></TABLE><A name="zid-2356">&#13;</A>
<P><A name="z0853065">&#13;</A>
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5"><A name="z0227142">Arguments</A></FONT></B></TD></TR></TABLE>

<P>
<DL>
<DT><B>fileref</B></DT>
<DD>is a valid fileref.
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Tip:</B></TD>
<TD align="left" bgcolor="#F5F5F5">The association between
a fileref and an external file lasts only for the duration of the SAS session
or until you change it or discontinue it with another FILENAME statement.
You can change the fileref for a file as often as you want.</TD>
</TABLE>
<P></DD>

<DT><A name="z0853070">&#13;SOCKET</A></DT>
<DD>specifies the access method that enables
you to read from or write to a Transmission Control Protocol/Internet Protocol
(TCP/IP) socket.<P></DD>

<DT>'<B>hostname</B>:<B>portno</B>'</DT>
<DD>is the name or IP address of the host and
the TCP/IP port number to connect to. 
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Tip:</B></TD>
<TD align="left" bgcolor="#F5F5F5">Use this specification for
client access to the socket.</TD>
</TABLE>
<P></DD>

<DT>':<B>portno</B>' </DT>
<DD>is the port number to create for listening. 
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Tip:</B></TD>
<TD align="left" bgcolor="#F5F5F5">Use this specification for
server mode.</TD>
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Tip:</B></TD>
<TD align="left" bgcolor="#F5F5F5">If you specify <B><CODE><FONT size="+1">:0</FONT></CODE></B>, the system will choose a
number.</TD>
</TABLE>
<P></DD>

<DT><A name="z0853079">&#13;SERVER</A></DT>
<DD>sets the TCP/IP socket to be a listening
socket, thereby enabling the system to act as a server that is waiting for
a connection.
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Tip:</B></TD>
<TD align="left" bgcolor="#F5F5F5">The system accepts all connections
serially; only one connection is active at any one time.  </TD>
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>See Also:</B></TD>
<TD align="left" bgcolor="#F5F5F5">The <A href="#z0227140">RECONN=  option description</A>
under <B>TCPIP-Options</B>.</TD>
</TABLE>
<P></DD>
</DL>
 
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5"><A name="z0224951">TCPIP-Options</A></FONT></B></TD></TR></TABLE>

<DL>
<DT><A name="z0853083">&#13;BLOCKSIZE=<B>blocksize</B></A></DT>
<DD>where <I>blocksize</I>
 is the size of the socket data buffer in bytes.
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Default:</B></TD>
<TD align="left" bgcolor="#F5F5F5">8192</TD>
</TABLE>
<P></DD>

<DT><A name="z0853086">&#13;LRECL=<B>lrecl</B></A></DT>
<DD>where <I>lrecl</I>
 is the logical record length.  
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Default:</B></TD>
<TD align="left" bgcolor="#F5F5F5">256</TD>
</TABLE>
<P></DD>
<A NAME="z0229829"></A>
<DT><A name="z0853089">&#13;RECFM=<B>recfm</B></A></DT>
<DD>where <I>recfm</I>
is one of three record formats: 
<TABLE cellpadding="5" cellspacing="0">
<TR align=left valign="top">
<TD>F </TD>
<TD align="left">is fixed record format. Thus, all
records are of size LRECL with no line delimiters. Data are transferred in
image (binary) mode. </TD></TR>

<TR align=left valign="top">
<TD>S</TD>
<TD align="left">is stream record format. 
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Tip:</B></TD>
<TD align="left" bgcolor="#F5F5F5">Data are transferred in
image (binary) mode.</TD>
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Interactions:</B></TD>
<TD align="left" bgcolor="#F5F5F5">The amount of data
that is read is controlled by the current LRECL value or the value of the
NBYTE= variable in the FILE or INFILE statement. The NBYTE= option specifies
a variable equal to the amount of data to be read. This amount must be less
than or equal to LRECL. </TD>
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>See Also:</B></TD>
<TD align="left" bgcolor="#F5F5F5">The <A href="z0171874.htm#z0224865">NBYTE= option</A> under the
FILE statement and the <A href="z0146932.htm#z0224882">NBYTE= option</A> in the INFILE
statement.</TD>
</TABLE>
</TD></TR>

<TR align=left valign="top">
<TD>V</TD>
<TD align="left">is variable record format (the default). 
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Tip:</B></TD>
<TD align="left" bgcolor="#F5F5F5">In this format, records
have varying lengths, and they are transferred in text (stream) mode.</TD>
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Tip:</B></TD>
<TD align="left" bgcolor="#F5F5F5">Any record larger than LRECL
is truncated. </TD>
</TABLE>
</TD></TR>
</TABLE>

<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Default:</B></TD>
<TD align="left" bgcolor="#F5F5F5">V</TD>
</TABLE>
<P></DD>
<A NAME="z0227140"></A>
<DT><A name="z0853102">&#13;RECONN=<B>conn-limit</B></A></DT>
<DD>where <I>conn-limit</I>
is the maximum number of connections that the server will accept.
<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Explanation:</B></TD>
<TD align="left" bgcolor="#F5F5F5">Because only one
connection may be active at a time, a connection must be disconnected before
the server can accept another connection. When a new connection is accepted,
the EOV= variable is set to 1.  The server will continue to accept connections,
one at a time, until <I>conn-limit</I>  has been reached.</TD>
</TABLE>
<P></DD>

<DT><A name="z0853105">&#13;TERMSTR='<B>eol-char</B>'</A></DT>
<DD>where <B>eol-char </B><I></I>is
the line delimiter to use when RECFM=V.  There are three valid values:
<TABLE cellpadding="5" cellspacing="0">
<TR align=left valign="top">
<TD>CRLF</TD>
<TD align="left">carriage return (CR) followed by
line feed (LF).</TD></TR>

<TR align=left valign="top">
<TD>LF</TD>
<TD align="left">line feed only (the default).</TD></TR>

<TR align=left valign="top">
<TD>NULL</TD>
<TD align="left">NULL character (0x00).</TD></TR>
</TABLE>

<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Default:</B></TD>
<TD align="left" bgcolor="#F5F5F5">LF</TD>
<TR valign="top">
<TD align="left" bgcolor="#F5F5F5" width="95" nowrap><B>Restriction:</B></TD>
<TD align="left" bgcolor="#F5F5F5">Use this option
only when RECFM=V.</TD>
</TABLE>
<P></DD>
</DL>

<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5"><A name="z0176114">Details</A></FONT></B></TD></TR></TABLE>

<BR><H3><A name="z0176127">The Basics</A></H3>


<P>A TCP/IP socket
is a communication link between two applications. The <B>server</B>
application creates the socket and waits for a connection.  The <B>client</B> application connects to the socket.  With the SOCKET access method,
you can use SAS to communicate with another application over a socket in either
client or server mode.  The client and server applications can reside on the
same machine or on different machines that are connected by a network.  
<P> As an example, you can develop an application using
Microsoft Visual Basic that communicates with a SAS session that uses the
TCP/IP sockets. Note that Visual Basic does not provide inherent TCP/IP support.
 You can obtain a custom control (VBX) from SAS Institute Technical Support
(free of charge) that allows a Visual Basic application to communicate through
the sockets.
<BR><H3><A name="z0176122"><IMG border="0" src=" ../common/images/sym01.gif" alt="[1]">Using the SOCKET Access Method in Client Mode</A></H3>


<P>In client mode, a local SAS application can use the
SOCKET access method to communicate with a remote application that acts as
a server (and waits for a connection).  Before you can connect to a server,
you must know: 
<P>
<P>
<UL>

<LI>the network name or IP address of the host machine
running the server. <P>

<LI>the port number that the remote application is
listening to for new connections. <P>
</UL>
 
<P>The remote application can be another SAS application,
but it doesn't need to be.  When the local SAS application connects to the
remote application through the TCP/IP socket, the two applications can communicate
by reading from and writing to the socket as if it were an external file.
If at any time the remote side of the socket is disconnected, the local side
will also automatically terminate. 
<BR><H3><A name="z0176123"><IMG border="0" src=" ../common/images/sym02.gif" alt="[2]">Using the SOCKET Access Method in Server Mode</A></H3>


<P>When the local SAS application is in server mode, it
remains in a wait state until a remote application connects to it.  To use
the SOCKET access method in server mode, you need to know only the port number
that you want the server to listen to for a connection.  Typically, servers
use <I>well-known ports</I> to listen for connections.
These port numbers are reserved by the system for specific server applications.
For more information about how well-known ports are defined on your system,
refer to the documentation for your TCP/IP software or ask your system administrator. 
<P> If the server application does not use a well-known
port, then the system assigns a port number when it establishes the socket
from the local application. However, because any client application that waits
to connect to the server must know the port number, you should try to use
a well-known port.  
<P>While a local SAS server application is waiting for
a connection, the SAS System is in a wait state.  Each time a new connection
is established, the EOV= variable in the DATA step is set to 1. Because the
server accepts only one connection at a time, no new connections can be established
until the current connection is closed.  The connection closes automatically
when the remote client application disconnects. The SOCKET access method continues
to accept new connections until it reaches the limit set in the RECONN option. 
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5"><A name="z0227143">Examples</A></FONT></B></TD></TR></TABLE>

<P>
<BR><H3> <A name="z0227144">Example 1: Communicating between Two SAS Applications over a TCP/IP Socket</A> </H3>


<P>This example shows how two SAS applications
can talk over a TCP/IP socket. The local application is in server mode; the
remote application is the client that connects to the server.  This example
assumes that the server host name is  <B><CODE><FONT size="+1">hp720.unx.sas.com</FONT></CODE></B>,
that the well-known port number is 5000, and that the server allows a maximum
of three connections before closing the socket.
<P> Here is the program for the server application:
<PRE>filename local socket ':5000' server reconn=3;
   /*The server is using a reserved */
   /*port number of 5000.           */ 

data tcpip;
   infile local eov=v;
   input x $10;
   if v=1 then
      do;              /* new connection when v=1 */
         put 'new connection received';
      end;
   output;
run;</PRE>
<P>Here is the program for the remote client application:
<PRE>filename remote socket 'hp720.unx.sas.com:5000';

data _null_;
   file remote;
   do i=1 to 10;
      put i;
   end;
run;</PRE>
<TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5"><FONT size="5"><A name="z0227145">See Also</A></FONT>
</FONT></B></TD></TR></TABLE>
<P>
<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>Statements:
<P>
<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD><A href="z0211297.htm">FILENAME</A></TD></TR>
<TR valign="top"><TD></TD><TD><A href="z0218954.htm">FILENAME, CATALOG Access Method</A></TD></TR>
<TR valign="top"><TD></TD><TD><A href="z0178980.htm">FILENAME, FTP Access Method</A></TD></TR></TABLE></TD></TR></TABLE>

<P><!-- navigation -->
<P><TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0293668.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z0178980.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="z0223242.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
<TD align="center">
<A href="#z0218957">
<IMG border="0" SRC="../common/images/top1.gif"><BR><FONT size="-2">Top of Page</FONT></A></TD>
</TR></TABLE>
<P><FONT size=1><A href="../common/images/copyrite.htm">Copyright 1999 by SAS Institute Inc., Cary, NC, USA. All rights reserved.</A></FONT>
</BODY>
</HTML>