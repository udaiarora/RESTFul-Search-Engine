<HTML>
<!-- This page produced Thu Jul  8 09:27:58 EDT 1999
 -->
<!-- Used program version 1.118.1.2 from beta -->
<HEAD>
<!-- <META http-equiv="Content-Type" content="text/html; charset="> -->
<TITLE>Adjusting Data with Filters : Using the Filters Provided with the Software </TITLE></HEAD>
<BODY bgcolor="#FFFFFF">
<!-- navigation -->
<TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0238013.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z0229363.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="ownfil.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
</TR></TABLE>
<!-- running head -->
<TABLE width="100%" cellpadding="4">
<TR valign="MIDDLE">
<TD bgcolor="#CCCC99"><I><FONT size="2">SAS/SPECTRAVIEW Software User's Guide                                                                                     </FONT></I></TD>
</TR>
</TABLE><H1><FONT size="5"><A name="z0229378">Using the Filters Provided with the Software</A></FONT></H1>


<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5">Understanding the Filters</FONT></B></TD></TR></TABLE>

<P><A name="z0781239">&#13;
SAS/SPECTRAVIEW  provides
four filters: </A>
<DL>
<DT>Blend filter</DT>
<DD>smooths by averaging without weighting the
response value.<P></DD>

<DT>Gaussian filter</DT>
<DD>smooths by averaging and weights the response
value.<P></DD>

<DT>Laplacian filter</DT>
<DD>sharpens the data.<P></DD>

<DT>Median filter</DT>
<DD>smooths by using the median value.<P></DD>
</DL>

<P>The filters are provided as templates and are preset
with values that the software uses to multiply the response values.  The templates
differ only in their values, which you can use or modify to suit your needs.
 The Median filter does not provide values and cannot be modified.
<P>Note that you can also create your own data filter,
which is explained in <A href="ownfil.htm">Creating and Applying Your Own Filter</A>.
<BR><H3>Blend Filter</H3>


<P><A name="z0781250">&#13;The Blend filter,
which is the default, gently smooths data by averaging the response value
with the values of adjacent response values. (In comparison, the Gaussian
filter smooths by averaging and also weights the response value.)  The Blend
filter uses the following preset values, which you can modify: </A>
<P> 



<PRE> 1 1 1   1 1 1   1 1 1
 1 1 1   1 1 1   1 1 1
 1 1 1   1 1 1   1 1 1</PRE>
<P>Each element in the matrix has a value of 1. The multiplication
does not change any values, so the response values are simply averaged to
arrive at the replacement response value.
<BR><H3>Gaussian Filter</H3>


<P><A name="z0781253">&#13;The Gaussian
filter smooths data by averaging and also weights the response value. (In
comparison, the Blend filter smooths by averaging but does not raise the response
value.)  The Gaussian filter uses the following preset values, which you can
modify:</A>
<P>  



<PRE> 0 0 0   0 1 0   0 0 0
 0 1 0   1 4 1   0 1 0
 0 0 0   0 1 0   0 0 0</PRE>
<P>The response value being operated on is multiplied by
4, which increases (weights) it.  Adjacent response values are multiplied
by 1, so they are not changed. The resulting values are then averaged, with
the average replacing the response value being operated on. <B>Note that
the Gaussian filter is useful to smooth out spikes in CAT scan data.</B>
<BR><H3>Laplacian Filter</H3>


<P><A name="z0781256">&#13;The Laplacian
filter sharpens data by weighting the response value and pulling down the
adjacent response values.  The Laplacian filter uses the following preset
values, which you can modify: </A>
<P> 



<PRE> 0 0 0   0-1 0   0 0 0
 0-1 0  -1 7-1   0-1 0
 0 0 0   0-1 0   0 0 0</PRE>
<P>The response value being operated on is multiplied by
7, which increases (weights) it. Adjacent response values are multiplied by
-1, which decreases (pulls down) their values. The resulting values are then
averaged, with the average replacing the response value being operated on. <B>Note that the Laplacian filter is helpful for sharpening contrast in data.</B>
<BR><H3>Median Filter</H3>


<P><A name="z0781259">&#13;The
Median filter smooths data by using a median (middle) value. The Median filter
is not a template.  There are no values in the matrix; only asterisks, which
cannot be changed.</A>
<P>The Median filter sorts the response value being operated
on with surrounding response values in order, selects the median value, then
replaces the response value being operated on with the median value. The median
value is the value in the sorted list that has the same number of values below
it as above it.  All 27 values, except missing values, are included in each
operation.
<BR><H3>Combining Filters</H3>


<P><A name="z0781261">&#13;You
can apply multiple filters to the data to both smooth and sharpen data. For
example: </A>
<P>
<UL>

<LI>apply the Laplacian filter along with the Gaussian
filter<P>

<LI>apply the Gaussian filter or Median filter along
with the Laplacian filter<P>

<LI>apply the Laplacian filter along with the Median
filter.<P>
</UL>
 Note that the order in which you apply filters affects the
result.  That is, if you apply a Laplacian filter, then a Gaussian filter,
the result will be different than if you apply the Gaussian filter first,
then the Laplacian filter.
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5">Applying a Filter Provided with the Software</FONT></B></TD></TR></TABLE>

<P><A name="z0781265">&#13;The
following instructions apply a data filter provided with  SAS/SPECTRAVIEW : </A>
<OL START="1" type="1">
<LI>Load the appropriate data
set.<P>

<LI>Select [<SMALL><B>Data</B></SMALL>], then [<SMALL><B>Filter
data</B></SMALL>].<P>

<LI>Specify the filter you want to load by selecting
one of the following.  The default is the Blend filter. 



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>[<SMALL><B>Blend filter</B></SMALL>] smooths by averaging without weighting
the response value.</TD></TR>
<TR valign="top"><TD></TD><TD>[<SMALL><B>Gaussian filter</B></SMALL>] smooths by averaging and weights the
response value.</TD></TR>
<TR valign="top"><TD></TD><TD>[<SMALL><B>Laplacian filter</B></SMALL>] sharpens the data.</TD></TR>
<TR valign="top"><TD></TD><TD>[<SMALL><B>Median filter</B></SMALL>] smooths by using the median
value.</TD></TR></TABLE><P>

<LI>Select [<SMALL><B>Apply filter</B></SMALL>] to apply
the filter to all response values in the data.<P>
</OL>

<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5">An Example Using the Blend Filter</FONT></B></TD></TR></TABLE>

<P>The following steps illustrate the effects of applying
the Blend filter: 
<OL START="1" type="1">
<LI>Issue the following DATA step code to create a
SAS data set named BUMPY, which produces a series of ellipses with additional
random noise added to the response values: 
<P> 



<PRE>data bumpy;
  do x = -5 to 5 by 0.5;
  do y = -5 to 5 by 0.5;
  do z = -5 to 5 by 0.5;
     response = (x*x*0.5 + y*y*0.3 + z*z*0.1) + 2.0*ranuni(-1);
     output;
   end; end; end;
run;</PRE><P>

<LI>Load the data set into  SAS/SPECTRAVIEW .<P>

<LI>Create an isosurface, which
represents one response
value: 
<OL START="1" type="a">
<LI>Select [<SMALL><B>Tools</B></SMALL>], then [<SMALL><B>Isosurface</B></SMALL>].<P>

<LI>To specify the response value,
use the left mouse
button and drag the histogram's left white line to a desired value.  (The
histogram appears at the bottom left of the interface.)<P>

<LI>Then select [<SMALL><B>W/ depth sort</B></SMALL>]. The
isosurface looks something like a football that is rather bumpy.<P>
</OL>
 
<P>
<P>
<B><I>Bumpy Isosurface</I></B><BR>

<P><IMG border="0" src="./images/01327148.gif" vspace="12" alt="[IMAGE]">
<P><P>

<LI>Next,
smooth the data by applying a data filter: 
<OL START="1" type="a">
<LI>Select [<SMALL><B>Data</B></SMALL>], then [<SMALL><B>Filter
data</B></SMALL>].<P>

<LI>Select [<SMALL><B>Blend filter</B></SMALL>].<P>

<LI>Select [<SMALL><B>Apply
filter</B></SMALL>].<P>
</OL>
<P>

<LI>Follow the same instructions as in Step 3 to re-create
the isosurface.
<P>The result is that removing the noise in the data displays
a much smoother surface, which can help in viewing overall trends in data. 
<P>
<P>
<B><I>Smoother Isosurface</I></B><BR>

<P><IMG border="0" src="./images/01327149.gif" vspace="12" alt="[IMAGE]">
<P><P>
</OL>


<P><!-- navigation -->
<P><TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0238013.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z0229363.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="ownfil.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
<TD align="center">
<A href="#z0229378">
<IMG border="0" SRC="../common/images/top1.gif"><BR><FONT size="-2">Top of Page</FONT></A></TD>
</TR></TABLE>
<P><FONT size=1><A href="../common/images/copyrite.htm">Copyright 1999 by SAS Institute Inc., Cary, NC, USA. All rights reserved.</A></FONT>
</BODY>
</HTML>