<HTML>
<HEAD>
<TITLE>Common Transformations</TITLE>
<LINK REL="STYLESHEET" TYPE="text/css" HREF="../sas.css">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<!--Navigation Panel-->
<TABLE BORDER="0" CELLPADDING="0">
<TR VALIGN="TOP">
  <TD ALIGN="CENTER">
  <A NAME="topofpage" HREF="index.htm">
  <IMG BORDER="0" SRC="../../common/images/cont1.gif" ALT="Chapter Contents" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Chapter Contents</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="index.htm"><IMG BORDER="0" SRC="../../common/images/prev1.gif" ALT="Previous" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Previous</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="sect2.htm"><IMG BORDER="0" SRC="../../common/images/next1.gif" ALT="Next" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Next</FONT></A></TD>
</TR>
</TABLE>
<TABLE BGCOLOR="#CCCC99" WIDTH="100%" CELLPADDING=4>
<TR>
  <TD VALIGN=MIDDLE CLASS="chaphead"><I><FONT SIZE="2">Transforming Variables</FONT></I></TD>
</TR>
</TABLE><BR>
<P><!--End of Navigation Panel-->
<H1><FONT SIZE="5">Common Transformations  </FONT></H1>
<P>The most common transformations are available in the
<SPAN CLASS="ssbeleven"><B>Edit:Variables</B></SPAN> menu.  For example, log transformations
are commonly used to linearize relationships,
stabilize variances, or reduce skewness.
Perform a log transformation in a fit window
by following these steps:
<A NAME="idxtra0007">&#13;</A><A NAME="idxtra0008">&#13;</A><A NAME="idxtra0009">&#13;</A><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Open the <SPAN CLASS="ssbeleven"><B>BASEBALL</B></SPAN> data set.</TD></TR></TABLE><p>
<P><A NAME="idxtra0010">&#13;</A><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Create a fit analysis of <SPAN CLASS="ssbeleven"><B>SALARY</B></SPAN> versus <SPAN CLASS="ssbeleven"><B>CR_HOME</B></SPAN>.</TD></TR></TABLE><p>
<P><A NAME="fitanalysisofsalaryversuscrhome">&#13;</A><CENTER><IMG SRC="images/tra02.gif" ALT="tra02.gif (14615 bytes)" HEIGHT="668" WIDTH="657"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.2:</B> Fit Analysis of <SPAN CLASS="ssbeleven"><B>SALARY</B></SPAN> versus <SPAN CLASS="ssbeleven"><B>CR_HOME</B></SPAN></SPAN><P>
<P>You might expect players who hit many home runs to receive high
salaries.  However, most players do not hit many home runs, and
most do not have high salaries.  This obscures the relationship
between <SPAN CLASS="ssbeleven"><B>SALARY</B></SPAN> and <SPAN CLASS="ssbeleven"><B>CR_HOME</B></SPAN>.  Most of the observations appear
in the lower left corner of the scatter plot, and the regression
line does not fit the data well.  To make the relationship
clearer, apply a logarithmic transformation.
<A NAME="idxtra0011">&#13;</A><BR>
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Select both variables in the scatter plot.</TD></TR></TABLE><p><BR>Use your host's method for noncontiguous selection.
<P><A NAME="saslryandcrhomeselected">&#13;</A><CENTER><IMG SRC="images/tra03.gif" ALT="tra03.gif (14924 bytes)" HEIGHT="668" WIDTH="657"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.3:</B> <SPAN CLASS="ssbeleven"><B>SALARY</B></SPAN> and <SPAN CLASS="ssbeleven"><B>CR_HOME</B></SPAN> Selected</SPAN><P>
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Choose <SPAN CLASS="ssbeleven"><B>Edit:Variables:log(Y)</B></SPAN>.</TD></TR></TABLE><p>
<A NAME="idxtra0012">&#13;</A><A NAME="idxtra0013">&#13;</A><A NAME="idxtra0014">&#13;</A><BR>
<A NAME="traeditvariablesmenu">&#13;</A><IMG WIDTH="442" HEIGHT="223" ALIGN="BOTTOM" BORDER="0"
 SRC="images/traeq1.gif"
 ALT="[menu]"><BR>
<SPAN CLASS="ssften"><B>Figure 20.4:</B> Edit:Variables Menu</SPAN><P>
<P>This performs a log transformation on both <SPAN CLASS="ssbeleven"><B>SALARY</B></SPAN> and
<SPAN CLASS="ssbeleven"><B>CR_HOME</B></SPAN> and transforms the scatter plot to a log-log plot.
Now the regression fit is improved, and the relationship
between salary and home run production is clearer.
<P><A NAME="fitanalysisoflsaslaryversuslcrhome">&#13;</A><CENTER><IMG SRC="images/tra05.gif" ALT="tra05.gif (15507 bytes)" HEIGHT="668" WIDTH="657"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.5:</B> Fit Analysis of <SPAN CLASS="ssbeleven"><B>L_SALARY</B></SPAN> 
versus <SPAN CLASS="ssbeleven"><B>L_CR_HOM</B></SPAN></SPAN><P>
<P>The degrees of freedom (<SPAN CLASS="ssbeleven"><B>DF</B></SPAN>) is reduced from 261 to 258.
This is due to missing values resulting from the log
transformation, described in the following step.
<A NAME="idxtra0015">&#13;</A><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Scroll the data window to display the last four variables.</TD></TR></TABLE><p><BR>Notice that in addition to residual and predicted values from the
regression, the log transformations created two new variables:
<SPAN CLASS="ssbeleven"><B>L_SALARY</B></SPAN> and <SPAN CLASS="ssbeleven"><B>L_CR_HOM</B></SPAN>.
<P><A NAME="newvariables">&#13;</A><CENTER><IMG SRC="images/tra06.gif" ALT="tra06.gif (12054 bytes)" HEIGHT="320" WIDTH="545"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.6:</B> New Variables</SPAN><P>
<P>The log transformation is useful in many cases.
However, the result of <SPAN CLASS="ssbeleven"><B>log( Y )</B></SPAN> is undefined where <SPAN CLASS="ssbeleven"><B>Y</B></SPAN> is
less than or equal to 0.  In such cases, SAS/INSIGHT software
cannot transform the value, so a missing value (.) is generated.
To see this, sort the data in the data window.
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Select <SPAN CLASS="ssbeleven"><B>L_CR_HOM</B></SPAN> in the data window, and
choose <SPAN CLASS="ssbeleven"><B>Sort</B></SPAN> from the data pop-up menu.</TD></TR></TABLE><p>
<P><A NAME="missingvaluesinlogtransformation">&#13;</A><CENTER><IMG SRC="images/tra07.gif" ALT="tra07.gif (11510 bytes)" HEIGHT="320" WIDTH="545"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.7:</B> Missing Values in Log Transformation</SPAN><P>
<P>Missing values in the SAS System are considered to be less than
any other value, so they appear first in the sorted variable.
These values represent players who have never hit home runs.
Their value for <SPAN CLASS="ssbeleven"><B>CR_HOME</B></SPAN> is 0, so the log of this value cannot
be calculated.  This means the log transformation has removed
data from the fit analysis.  The following steps circumvent
this problem.
<A NAME="idxtra0016">&#13;</A><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Select <SPAN CLASS="ssbeleven"><B>CR_HOME</B></SPAN> in the data window.</TD></TR></TABLE><p>
<P><A NAME="crhomeselected">&#13;</A><CENTER><IMG SRC="images/tra08.gif" ALT="tra08.gif (11060 bytes)" HEIGHT="320" WIDTH="553"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.8:</B> <SPAN CLASS="ssbeleven"><B>CR_HOME</B></SPAN> Selected</SPAN><P>
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Choose <SPAN CLASS="ssbeleven"><B>Edit:Variables:Other</B></SPAN>.</TD></TR></TABLE><p>
<A NAME="idxtra0017">&#13;</A><A NAME="idxtra0018">&#13;</A><BR>
<A NAME="traeditvariablesmenu2">&#13;</A><IMG WIDTH="442" HEIGHT="223" ALIGN="BOTTOM" BORDER="0"
 SRC="images/traeq2.gif"
 ALT="[menu]"><BR>
<SPAN CLASS="ssften"><B>Figure 20.9:</B> Edit:Variables Menu</SPAN><P>
<P>This displays the Edit Variables dialog shown in 
<A HREF="sect1.htm#traeditvariablesdialog2">Figure 20.10</A>.  In the dialog you can see that the variable
<SPAN CLASS="ssbeleven"><B>CR_HOME</B></SPAN> is already assigned as the <SPAN CLASS="ssbeleven"><B>Y</B></SPAN> variable.
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Scroll down the transformation window, and select <SPAN CLASS="ssbeleven"><B>log( Y + a )</B></SPAN>.</TD></TR></TABLE><p>
<P><A NAME="traeditvariablesdialog2">&#13;</A><CENTER><IMG SRC="images/tra10.gif" ALT="tra10.gif (8221 bytes)" HEIGHT="367" WIDTH="515"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.10:</B> Edit Variables Dialog</SPAN><P>
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">In the field for <SPAN CLASS="ssbeleven"><B>a</B></SPAN> enter the value <SPAN CLASS="ssbeleven"><B>1</B></SPAN>, then press the Return key.</TD></TR></TABLE><p><BR>Notice that the <SPAN CLASS="ssbeleven"><B>Label</B></SPAN> value changes from <SPAN CLASS="ssbeleven"><B>log( CR_HOME )</B></SPAN> to
<SPAN CLASS="ssbeleven"><B>log( CR_HOME + 1 )</B></SPAN> to reflect the new value of <SPAN CLASS="ssbeleven"><B>a</B></SPAN>.
Setting <SPAN CLASS="ssbeleven"><B>a</B></SPAN> to <SPAN CLASS="ssbeleven"><B>1</B></SPAN> avoids the problem of generating missing
values because <SPAN CLASS="ssbeleven"><B>(CR_HOME + 1)</B></SPAN> is greater than zero in all
cases for this data.
<P><A NAME="traeditvariablesdialog3">&#13;</A><CENTER><IMG SRC="images/tra11.gif" ALT="tra11.gif (8261 bytes)" HEIGHT="367" WIDTH="515"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.11:</B> Edit Variables Dialog</SPAN><P>
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Click <SPAN CLASS="ssbeleven"><B>OK</B></SPAN> to perform the transformation.</TD></TR></TABLE><p>
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Scroll all the way to the right to see the new variable, <SPAN CLASS="ssbeleven"><B>L_CR_H_1</B></SPAN>.</TD></TR></TABLE><p><BR>Notice that the new variable contains no missing values.
<P><A NAME="newvariable">&#13;</A><CENTER><IMG SRC="images/tra12.gif" ALT="tra12.gif (11497 bytes)" HEIGHT="320" WIDTH="553"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.12:</B> New Variable</SPAN><P>
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/step.gif"><br>
</TD><TD BGCOLOR="#F0F0F0" CLASS="step">Select <SPAN CLASS="ssbeleven"><B>L_SALARY</B></SPAN> and <SPAN CLASS="ssbeleven"><B>L_CR_H_1</B></SPAN>, then choose <SPAN CLASS="ssbeleven"><B>Analyze:Fit (Y X)</B></SPAN>.</TD></TR></TABLE><p><BR>At the lower left corner of the scatter plot, you can see
observations that were not used in the previous fit analysis.
Also note that the degrees of freedom (<SPAN CLASS="ssbeleven"><B>DF</B></SPAN>) is back to 261.
<A NAME="idxtra0019">&#13;</A><A NAME="idxtra0020">&#13;</A><P><A NAME="newfitanalysis">&#13;</A>
<P><CENTER><IMG SRC="images/tra13.gif" ALT="tra13.gif (15121 bytes)" HEIGHT="667" WIDTH="654"></CENTER><BR>
<SPAN CLASS="ssften"><B>Figure 20.13:</B> New Fit Analysis</SPAN><P>
<P><p><TABLE WIDTH="100%" BGCOLOR="#E0E0E0" CELLPADDING="5"><TR><TD ALIGN="CENTER" WIDTH="70"><img width="32" height="32" alt="" src="../../common/images/refr.gif"><br>
<font size="-2">Related<BR>Reading</font></TD><TD BGCOLOR="#F0F0F0">Linear Models, <A HREF="../chap39/index.htm">Chapter 39</A>.</TD></TR></TABLE><p>
<P>
<P>
<!--Navigation Panel-->
<TABLE BORDER="0" CELLPADDING="0">
<TR VALIGN="TOP">
  <TD ALIGN="CENTER">
  <A HREF="index.htm">
  <IMG BORDER="0" SRC="../../common/images/cont1.gif" ALT="Chapter Contents" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Chapter Contents</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="index.htm"><IMG BORDER="0" SRC="../../common/images/prev1.gif" ALT="Previous" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Previous</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="sect2.htm"><IMG BORDER="0" SRC="../../common/images/next1.gif" ALT="Next" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Next</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="#topofpage">
  <IMG BORDER="0" SRC="../../common/images/top1.gif" ALT="Top" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Top</FONT></A></TD>
</TR>
</TABLE>
<P><!--End of Navigation Panel-->
<P><FONT SIZE="1"><A HREF="../../common/images/copyrite.htm">Copyright &copy; 1999 by SAS Institute Inc., Cary, NC, USA. All rights reserved.</A></FONT>
</BODY>
</HTML>
