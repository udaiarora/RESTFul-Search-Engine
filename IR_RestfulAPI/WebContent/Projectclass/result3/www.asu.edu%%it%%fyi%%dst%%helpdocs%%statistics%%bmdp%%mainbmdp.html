<html>
<head>
<title>
BMDP - Using BMDP under UNIX 
</title>
</head>
<body bgcolor="#ffffff">
<h2><center>
BMDP - Using BMDP under UNIX 
</h2>
<p><h3>            
Instruction and Research Support, Arizona State University
</h3><br>
Write-up #G-41, revised 5/2000
</center>
<p>
Table of Contents
<dl><dt>
1.      Introduction<dd>
        1.1     Abstract<dd>
        1.2     General Information<dd>
        1.3     References<dd>
        1.4     BMDP News<dd>
        1.5     BMDP Support at ASU<dd>
        1.6     Sources of Help<dd>
<dt>
2.      Overview
<dt>
3.      Using BMDP under UNIX<dd>
        3.1     Foreground Processing<dd>
        3.2     Background Processing<dd>
	3.3     Executing in Batch via LSF<dd>
<dt>
4.      Sample BMDP Instruction Sets<dd>
        4.1     Using BMDP with In-stream Data as Input<dd>
        4.2     Using BMDP with External Data File as Input<dd>
        4.3     Creating a BMDP System File<dd>
        4.4     Using a BMDP System File<dd>
<dt>
5.      Using BMDP Instruction Set from within SAS<dd>
        5.1     Accessing PROC BMDP<dd>
<dt>
6.      Transporting BMDP Files from the ASU Mainframe to 
        the UNIX System<dd>
<dt>
7.      Printing<dd>
<dt>
8.      How to allocate more memory to a BMDP Program<dd>
</dl>
<hr>
<h3>
.c.1.  Introduction
</h3><h4>
.c.1.1  Abstract
</h4>
BMDP* is a statistical package that consists of independent
programs that provide flexible and convenient procedures for
data analysis, ranging from simple data display and
description to advanced multivariate statistical techniques.
This write-up describes how to access BMDP on the Statistics
UNIX Server at ASU.  Also included is information on support
and documentation for BMDP at ASU and how to access BMDP
using SAS.
<p><h4>
.c.1.2  General Information
</h4><em>
Write-up Status:</em>  Minor revisions has been made to this write-up to 
		  update the information related to submitting jobs to a 
		  batch queue. 
<p><em>
On-line documentation:</em>  This as well as several other
                  documents are available on-line and can be
                  accessed by entering "help" at the UNIX
                  command prompt, or by pointing a WWW browser 
 		  to http://www.asu.edu/it/fyi/research/helpdocs/.
<p><em>
Caution:</em>     UNIX is case sensitive and the commands
                  must be typed as they appear in the
                  documentation.
<p><em>
Miscellaneous:</em> For details on the UNIX commands used in
                  this document, see the on-line "man" pages
                  available on the system.
<p><h4>
.c.1.3  References
</h4>
BMDP Statistical Software Manual, 1990 Revision, Version 7.0,
Volumes 1, 2 & 3 and BMDP User's Digest, Version 7.0 are the
main reference manuals for the BMDP statistical software
package.  Copies of these manuals are available for reference
in COMPASS, and can also be ordered through the ASU Bookstore.
<p>
*BMDP is a registered trademark of SPSS Inc.,  
444 North Michigan Avenue, Chicago, IL 60611
<p>
<h4>
.c.1.4  BMDP News
</h4>
A list of new features and program changes can be obtained in
any BMDP program by using the NEWS option in the PRINT
paragraph.  Refer to the BMDP manual for details on using the
NEWS option.
<h4>
.c.1.5  BMDP Support at ASU
</h4>
Most of the BMDP programs are fully supported.  Consulting
assistance is available and documentation, error correction,
upgrades and changes, and testing are given priority.
Programs 3R, AR, and any others that use the BMDP/FORTRAN VS
interface are minimally supported.  This means that only
minimal consulting assistance is available and documentation,
error correction, upgrades and changes, and testing are given
low priority.
<p><h4>
.c.1.6  Sources of Help
</h4><h5>
.c.1.6.1  BMDP Help
</h5>
For assistance with problems that are system-related please  
contact the Help Desk at 5-6500 or Helpdesk@asu.edu.  Otherwise, 
if the question is class/course related then contact your         
instructor.  Anyone else affiliated with ASU and using BMDP to    
teach a class, for research or for their ASU job assignment can  
contact "Research-q@asu.edu" via email.
<p><h5>
.c.1.6.2  Statistics Help
</h5>
For questions related to selecting appropriate statistical
method for analysis of research data, choosing and using a
statistical package and procedure, and interpreting the
results of the analysis, you can call the Statistics Hotline
at 965-STAT.
<p>
<h3>
.c.2.  Overview
</h3>
BMDP is a library of statistical programs designed to
describe, display, and analyze data.  Some of the types of
analysis available includes:  simple data description
(including plots, histograms, frequency tables, correlation,
etc.), linear and nonlinear regression, analysis of variance
and covariance, nonparametric analysis, cluster analysis,
multivariate analysis, survival analysis, correspondence
analysis, forecasting, and more.

<p><h3>
.c.3.  Using BMDP under UNIX
</h3>
In UNIX, the execution of a command is just one of the
several tasks (or processes) to be completed by the operating
system.  Since UNIX is a multitasking system, various
processes can be run in at the same time.  For example, you
can have one process running in the foreground and several in
the background.
<p>
<h4>
.c.3.1  Foreground Processing
</h4>
In this type of processing, when a command is entered the
shell starts a process to execute that command and your
terminal becomes dedicated to that process.  When the process
is complete the UNIX command prompt reappears and you can
continue with the execution of other commands.  The syntax of
the command to invoke BMDP noninteractively in the
foreground, is as follows:
<ul>
            bmdp xx inputfile outputfile
</ul><p>
where "xx" is the BMDP program name -- for example, 2d,
"inputfile" is the name of the file containing your BMDP
instructions, and "outputfile" is the name of the file that
receives the program output.  Refer to section #4 for
examples on executing BMDP programs.
<p>
<h4>
.c.3.2  Background Processing
</h4>
In this type of processing, when a command is entered a
background process executes independent of the shell and your
terminal is available for other work.  The bmdp syntax is:
<ul>
            bmdp xx inputfile outputfile &
</ul><p>
<p>
<h4>
.c.3.3  Executing in Batch via LSF
</h4>
BMDP jobs can be sent to a batch queue called "Load Sharing 
Facility" (LSF). The queue allows for true batch job submission.
When you submit a job, the shell issues a system command prompt
indicating that you can continue with other work while the job is
being processed. You can enter other commands, start other
background processes, and you can even log off the system while the
process is continuing.  It is strongly recommended that large jobs
that require a lot of CPU time, memory or large disk space for temporary
files should be submitted to this queue. 
 <p>
To send an BMDP job to the batch queue and to check its status, 
there are 2 executable files currently available for use. 
The files are called <b>runbmdp</b> and <b>q</b>.  
 <p>
The syntax for executing runbmpd is:
<p>
<blockquote>
<p>
runbmdp QUEUE_NAME BMDP_PROGRAM_NAME INPUT_FILE_NAME
</blockquote>
<p>
Where, QUEUE_NAME can be <em>short</em>, <em>medium</em> or <em>long</em>
and the output file created will be similar to INPUT_FILE_NAME.out. <p>
The syntax for q is:
<p>
<blockquote>
<p>
q
</blockquote>
<p>
When your job is being processed in the queue and for some
reason you decide to delete it, you can do so by entering
the following at the system prompt:
 <p><ul>
        bkill JOB_ID 
 </ul><p>
where "job_id", is the numeric id of the job you wish to delete.
The id # can be obtained from the information displayed by the
q command.
<p>
Which Queue should you submit to?  This depends on how much
computer CPU time you think your job will require.  You can use the
"short" queue if your job requires upto one hour of CPU time, 
or "medium" queue if it requires upto five hours, or "long" 
if it requires upto twenty hours.
 <p>
For more information on LSF, enter "help lsf" at the UNIX system prompt
or point your web browser to: <br>
<blockquote>
http://www.asu.edu/it/fyi/research/helpdocs/unix/lsf/
</blockquote>
<p>
<h3>
.c.4.  Sample BMDP Instruction Sets
</h3>
The following sub-sections show working examples of the BMDP
instruction sets and the command for executing them.  The
BMDP commands can be used for foreground or background
processing.
<p><h4>
.c.4.1  Using BMDP with In-stream Data as Input
</h4>
When data is included as part of a BMDP instruction set, it
is called in-stream data (as opposed to data that is read
into a program from an external source such as a disk or tape
file).
<p>
The following instructions set with program 2D, performs
detailed data description including frequencies using in-
stream data as input.  Notice that the data follows the /END
command and the data format is given in the FORMAT =
subcommand of the /INPUT paragraph.  Refer to the BMDP manual
for complete details on using the 2D program.
<pre>
     /input     variables = 4.
        title = 'Test of 2d program using in-stream data'.
            format = '(4f1.0)'.
     /variable  names = id, q1, q2, q3.
     /end
     1134
     2241
     3421
     4353
     5122
</pre>
Suppose the above instruction set is contained in a file
called "bmdp2d.in" and we wish the output from the program to
be contained in "bmdp2d.out", in this case the BMDP command
used is:
<p><ul>
        bmdp 2d bmdp2d.in bmdp2d.out
</ul><p>
<h4>
.c.4.2  Using BMDP with External Data Files as Input
</h4>
The following instruction set with program 5D, does
Histograms and Univariate Plots using data from an external
file called "bmdpdata" as input.
<pre>
     /input        file = 'bmdpdata'.
                   title = 'Test of 5d program using external data'.
                   format = free.
                   variables = 2.
     /variables    names = group, y.
                   grouping = group.
     /group        codes(group) = 1, 2.
     /plot         group = each.
     /end
</pre>
Suppose the above instruction set is contained in a file
called "bmdp5d.in" and we wish the output from the program to
be contained in "bmdp5d.out", in this case the BMDP command
used is:
<p><ul>
        bmdp 5d bmdp5d.in bmdp5d.out
</ul><p>
<h4>
.c.4.3  Creating a BMDP System File
</h4>
The following instruction set shows how to create a BMDP
system file called "bmdp.sysfile" using the 1R (Linear
Regression) program.  The input variables (X and Y) along
with the predicted and residual values for each case are
saved in the system file.
<pre>
     /input         variables = 2.
                    title = 'Creating a bmdp system file'.
                    format = free.
     /variable      names = y, x.
     /regress       dependent = y.
                    independent = x.
     /print         data.
     /plot          residual.
                    normal.
     /save          file = 'bmdp.sysfile'.
                    code = residual.
                    content = data, cova.
                    new.
     /end
         10.98 35.3
         11.13 29.7
         12.51 30.8
          8.40 58.8
          9.27 61.4
          8.73 71.3
          6.36 74.4
          8.50 76.7
          7.82 70.7
          9.14 57.5
</pre>
Suppose the above instruction set is contained in a file
called "bmdp1r.in" and we wish the output from the program to
be contained in "bmdp1r.out", in this case the BMDP command
used is:
<p><ul>
        bmdp 1r bmdp1r.in bmdp1r.out
</ul><p>
<h4>
.c.4.4  Using a BMDP System File
</h4>
The following instruction set shows how the BMDP system file
called "bmdp.sysfile" created above would be read back into a
BMDP program.  In this case, the file is read back into the
Simple Data Description program 1D.
<pre>
     /input         file = 'bmdp.sysfile'.
                    code = residual.
                    title = 'Reading a bmdp system file'.
     /print         data.
     /end
</pre>
<h3>
.c.5.  Using BMDP Instruction Set from within SAS
</h3>
BMDP programs can be accessed from within any SAS job
(foreground or background) via the SAS procedure PROC BMDP.
To use this method of accessing BMDP, knowledge of SAS is
required.  Write-up G-26 titled "SAS - Using SAS under UNIX"
available on-line and in COMPASS provides details on how to
use SAS at ASU.  The advantage of using SAS to access BMDP is
the power and flexibility SAS provides in data management.
Data can be read in and manipulated easily in SAS and then
passed to any BMDP instructions.
<p>
PROC BMDP may be called any number of times within a single a
SAS job.  PROC BMDP is documented in the "SAS Companion for
the UNIX Environment and Derivative" manual available in
COMPASS.
<p>
<h4>
.c.5.1  Accessing PROC BMDP
</h4>
In the example below, a SAS data set named Sample is
created with the variables V1, V2, and V3.  The BMDP program
1D is called and the variables V1, V2, and V3 are passed to
it.  The BMDP program being called is named in the "PROG="
option of the PROC BMDP statement.  The BMDP instructions
(all starting with /) are always inserted after the
"PARMCARDS;" statement.  The "INPUTFILE" parameter in PROC
BMDP and "FILE =" in the /INPUT statements should always have
the same file (name of BMDP system file) assigned to them.
The "CODE= " parameter in the BMDP /INPUT statement should be
set to the name of the SAS data set being passed to BMDP (in
this case "sample").
<pre>
     data sample;
       input v1 v2 v3;
     cards;
     1 3 4
     2 4 1
     4 2 1
     3 5 3
     1 2 2
     ;
     /* This statement is required */
     filename ft15f001 'ft15f001.dat';
     proc bmdp prog=bmdp1d inputfile='temp.dat';
       var v1-v3;
     parmcards;
     /input         file = 'temp.dat'.
                    code = 'sample'.
                    title ='Using BMDP from SAS'.
     /end
</pre>
<h3>
.c.6.  Transporting BMDP Files from the ASU Mainframe to the
       UNIX System
</h3>
The steps involved in transporting a BMDP file are briefly as
follows:
<ol><p>
<li>Use the PORT command to translate the BMDP file into a
new "portable" text file.  The instruction to save a portable
BMDP file is the same as for a standard BMDP file except the
PORT command is used with the other SAVE instructions.
<p>
<li>Use FTP to transfer the file as an ascii file to the UNIX
system.  See the on-line document titled "How to transfer
files from the ASU Academic Mainframe to the UNIX System" for
more details.
<p>
<li>Use the PORT command in the INPUT paragraph to use the
portable BMDP file as input on the UNIX system.
</ol>
<p><h3>
.c.7.  Printing
</h3>
The first step in printing is to select a default printer for your
computer account and this can be done as follows:
<p><ol> 
<li>At the UNIX command prompt type "menu" and press the "return" key.
This brings up the Menu Options Screen.
<li>Press 0, to select Menu #2.
<li>Press 4, to select "Select default printer".
<li>From the list of printers displayed, select the printer that you would
like your output to be sent to and then press the "return" key.
<li>Press E twice to exit out of the menu options screens.
After defining the default printer, you can print files from your current
directory to the printer destination using the following command at the
UNIX command prompt:
</ol><ul><p> 
        lpr filename
</ul><p> 
where "filename" is the name of the file to be printed.
<p>
<h3>
.c.8.  How to allocate more memory to a BMDP Program
</h3>
The use of the -B parameter in the BMDP command allows for
additional memory.
<p><dl><dt>
-B # <dd> Specifies the number of kilobytes of storage to be
          allocated for use by the BMDP program.  You can
          calculate the number of words of storage made
          available to the BMDP program by dividing the
          number by 4, then multiplying by 1024.  The current
          default value for this parameter is approximately
          32 megabytes.  As an example, to run program 2V
          with the instructions stored in the input file
          "bmdp2v.in" and approximately 50 megabyte of
          memory, type the command:
<p><ul>
               bmdp -B 50000 2v bmdp2v.in bmdp2v.out
</ul></dl>
<br><br>
<p align=right>5/2000, jjc</p>

</body>
</html>	




