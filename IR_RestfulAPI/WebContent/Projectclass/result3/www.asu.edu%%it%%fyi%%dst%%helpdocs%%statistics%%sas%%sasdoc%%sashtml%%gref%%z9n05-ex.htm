<HTML>
<!-- This page produced Fri Jul  9 14:14:38 EDT 1999
 -->
<!-- Used program version 1.118.1.2 from beta -->
<HEAD>
<!-- <META http-equiv="Content-Type" content="text/html; charset="> -->
<TITLE>The GMAP Procedure : Creating Maps with Drill-down for the Web </TITLE></HEAD>
<BODY bgcolor="#FFFFFF">
<!-- navigation -->
<TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0729027.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z9n04-ex.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="z9n06-ex.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
</TR></TABLE>
<!-- running head -->
<TABLE width="100%" cellpadding="4">
<TR valign="MIDDLE">
<TD bgcolor="#CCCC99"><I><FONT size="2">The GMAP Procedure</FONT></I></TD>
</TR>
</TABLE><H1><FONT size="5"><A name="z9n05-ex">Example 5: Creating Maps with Drill-down for the Web</A></FONT></H1>
<HR>

<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B><B>Procedure Features:</B></B></TD>
<TD bgcolor="#CCCCCC" align="left">
<TABLE cellpadding="4" cellspacing="0">
<TR valign="top"><TD>CHORO statement options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>DES=</TD></TR>
<TR valign="top"><TD></TD><TD>DISCRETE</TD></TR>
<TR valign="top"><TD></TD><TD>HTML=</TD></TR>
<TR valign="top"><TD></TD><TD>NAME=</TD></TR></TABLE></TD></TR>
<TR valign="top"><TD>BLOCK statement 
options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>BLOCKSIZE=</TD></TR>
<TR valign="top"><TD></TD><TD>DES=</TD></TR>
<TR valign="top"><TD></TD><TD>MIDPOINTS=</TD></TR>
<TR valign="top"><TD></TD><TD>NAME=</TD></TR></TABLE></TD></TR></TABLE>
</TD></TR>
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B><B>ODS Features:</B></B></TD>
<TD bgcolor="#CCCCCC" align="left">
<TABLE cellpadding="4" cellspacing="0">
<TR valign="top"><TD>ODS HTML statement :



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>BODY=</TD></TR>
<TR valign="top"><TD></TD><TD>CONTENTS=</TD></TR>
<TR valign="top"><TD></TD><TD>FRAME=</TD></TR>
<TR valign="top"><TD></TD><TD>NOGTITLE</TD></TR>
<TR valign="top"><TD></TD><TD>PATH=</TD></TR></TABLE></TD></TR></TABLE>
</TD></TR>
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B><B>Other Features:</B></B></TD>
<TD bgcolor="#CCCCCC" align="left">
<TABLE cellpadding="4" cellspacing="0">
<TR valign="top"><TD>BY statement</TD></TR>
<TR valign="top"><TD>GOPTIONS statement</TD></TR>
<TR valign="top"><TD>LEGEND statement</TD></TR>
<TR valign="top"><TD>PATTERN statement</TD></TR>
<TR valign="top"><TD>TITLE
statement</TD></TR></TABLE>
</TD></TR>
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B><B>Sample library member:</B></B></TD>
<TD bgcolor="#CCCCCC" align="left">  GR19N05
</TD></TR>
</TABLE>
<HR>

<P><A name="z0758903">&#13;   This example shows how to create a 2D choropleth map with simple
drill-down functionality for the Web. When this map is displayed in a browser,
you can select an area of the map and display additional information about
the data.</A>
<P> The example explains how to use the ODS HTML statement
and the HTML procedure options to create the drill-down. It shows how to 
<P>
<UL>

<LI>explicitly name the HTML files and open and close
them throughout the program<P>

<LI>use BY-group processing with ODS HTML, including
storing multiple graphs in one file and incrementing anchor names, catalog
entry names, and graphics file names<P>

<LI> use the PATH= option to specify the destination
for the HTML and GIF files created by the ODS HTML statement<P>

<LI>use the NAME= option to name the graphics catalog
entries<P>

<LI>assign anchor names to the graphics output with
the ANCHOR= option in the ODS HTML statement<P>

<LI>add an HTML  HREF string to a data set to define
a link target<P>

<LI> assign link targets with the HTML= procedure
option<P>

<LI>use DES= to control the text of the table of contents
entry<P>

<LI>suppress the titles in the GIF files and display
them in the HTML file.<P>
</UL>

<P>For more information, see
<A href="zodschap.htm">ODS HTML Statement</A>.
<P> The example also illustrates other CHORO and BLOCK
statement options.
<P>The program produces one choro map that shows Environmental
Protection Agency (EPA) regions and block maps of the states in each region.
Each block map shows the number of hazardous waste sites for each state in
the selected region. <A href="#zn05-map">Browser View of Regional Map</A>
shows the map of the EPA regions. 
<P>
<B><I><A name="zn05-map">Browser View of Regional Map</A></I></B><BR>


<P><IMG border="0" src="./images/01329314.gif" vspace="12" alt="[IMAGE]">
<P>
<P><A href="#z-region">Browser View of Region 5 Block Map</A>
shows the block map that appears when you select Region 5 in the map. 
<P>
<B><I><A name="z-region">Browser View of Region 5 Block Map</A></I></B><BR>


<P><IMG border="0" src="./images/01329315.gif" vspace="12" alt="[IMAGE]">
<P>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z1003719">&nbsp;</A><A href="z1003719.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>libname maps '<I>SAS-MAPS-library</I>';
filename odsout '<I>path-to-Web-server-space</I>';</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729085">&nbsp;</A><A href="z0729085.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods listing close;
goptions reset=global gunit=pct cback=white
         colors=(black blue green red)
         ftext=swiss htitle=6 htext=3.5;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z1003724">&nbsp;</A><A href="z1003724.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>data sites;
   length stcode $ 2;
   input region stcode $ sites;
   state=stfips(stcode);
   datalines;
1   AK  12
4   AL  7
4   AR  12
2   AZ  10
1   CA  90
1   CO  15
5   CT  15
5   DE  18
4   FL  52
4   GA  15
1   HI  4
3   IA  16
1   ID  8
3   IL  38
3   IN  30
3   KS  10
4   KY  16
4   LA  15
5   MA  30
4   MD  13
5   ME  12
3   MI  72
3   MN  30
3   MO  22
4   MS  1
1   MT  8
4   NC  22
3   ND  0
3   NE  10
5   NH  18
5   NJ  105
2   NM  9
1   NV  1
5   NY  78
3   OH  34
2   OK  10
1   OR  10
5   PA  100
5   RI  12
4   SC  26
3   SD  2
4   TN  14
2   TX  26
1   UT  12
4   VA  25
5   VT  8
1   WA  49
3   WI  40
5   WV  6
1   WY  3
;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729086">&nbsp;</A><A href="z0729086.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>data newsites;
   length regiondrill $40;
   set sites;
   if region=1 then
      regiondrill='HREF="hazsite_statebody.html#Region1"';
   if region=2 then
      regiondrill='HREF="hazsite_statebody.html#Region2"';
   if region=3 then
      regiondrill='HREF="hazsite_statebody.html#Region3"';
   if region=4 then
      regiondrill='HREF="hazsite_statebody.html#Region4"';
   if region=5 then
      regiondrill='HREF="hazsite_statebody.html#Region5"';
run;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729088">&nbsp;</A><A href="z0729088.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>goptions device=gif transparency;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729090">&nbsp;</A><A href="z0729090.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods html body='hazsite_mapbody.html'
         contents='hazsite_contents.html'
         frame='hazsite_frame.html'
         nogtitle
         path=odsout;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729091">&nbsp;</A><A href="z0729091.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>title1 'Hazardous Waste Sites in EPA Regions (1997)';
footnote1 h=3 j=l 'click on a map region' j=r 'EPAMAP ';</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729093">&nbsp;</A><A href="z0729093.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>pattern1 value=msolid color=blue;
pattern2 value=msolid color=green;
pattern3 value=msolid color=red;
pattern4 value=msolid color=lime;
pattern5 value=msolid color=cyan;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729094">&nbsp;</A><A href="z0729094.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>proc gmap map=maps.us data=newsites;
   id state;
   choro region / discrete
                  html=regiondrill
                  coutline=black
                  nolegend
                  des='EPA Regional Map'
                  name='epamap';
run;
quit;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729095">&nbsp;</A><A href="z0729095.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods html body='hazsite_statebody.html'
         anchor='Region1'
         gtitle
         path=odsout;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729096">&nbsp;</A><A href="z0729096.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>goptions notransparency
         border;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729097">&nbsp;</A><A href="z0729097.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>proc sort data=newsites;
   by region;
run;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729098">&nbsp;</A><A href="z0729098.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>legend1 shape=bar(3,4)
        label=('Number of Sites'
               position=(top center))
        value=(j=l '0-24' '25-49' '50-74' '75-99' 'over 100')
        frame;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729099">&nbsp;</A><A href="z0729099.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>pattern1 value=ms color=gray;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729100">&nbsp;</A><A href="z0729100.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>pattern2 value=solid color=lipk;
pattern3 value=solid color=cyan;
pattern4 value=solid color=green;
pattern5 value=solid color=blue;
pattern6 value=solid color=red;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729101">&nbsp;</A><A href="z0729101.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>options nobyline;
title1 'Wastes Sites per State in Region #byval(region)';
footnote1 h=3 j=r 'SITEMAP ';</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729102">&nbsp;</A><A href="z0729102.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>proc gmap map=maps.us data=newsites;
   by region;
   id state;
   block sites / midpoints=(12 37 62 87 112)
                 legend=legend1
                 shape=cylinder
                 blocksize=4
                 coutline=black
                 des='State Maps'
                 name='states01';
run;
quit;</PRE></TD></TR></TABLE>






<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0729103">&nbsp;</A><A href="z0729103.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods html close;
ods listing;</PRE></TD></TR></TABLE>

<P><!-- navigation -->
<P><TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0729027.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z9n04-ex.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="z9n06-ex.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
<TD align="center">
<A href="#z9n05-ex">
<IMG border="0" SRC="../common/images/top1.gif"><BR><FONT size="-2">Top of Page</FONT></A></TD>
</TR></TABLE>
<P><FONT size=1><A href="../common/images/copyrite.htm">Copyright 1999 by SAS Institute Inc., Cary, NC, USA. All rights reserved.</A></FONT>
</BODY>
</HTML>