<html>
<head>
<title>
vi Reference Card
</title>
</head>

<body BGCOLOR="#FFFFFF">

<MAP NAME="headerMap21">
     <AREA SHAPE="circle" COORDS="560,22,22" HREF="http://www.asu.edu/it/fyi/search/">
     <AREA SHAPE="rect" COORDS="65,3,258,20" HREF="http://www.asu.edu/it/">
     <AREA SHAPE="rect" COORDS="3,2,64,43" HREF="http://www.asu.edu/">
     <AREA SHAPE="circle" COORDS="506,22,22" HREF="http://www.asu.edu/it/fyi/">
 </MAP>
<IMG SRC="http://www.asu.edu/it/fyi/menus/images/header.GIF" WIDTH="583" HEIGHT="43" 
ALIGN="BOTTOM" BORDER="0" NATURALSIZEFLAG="3" USEMAP="#headerMap21" ISMAP><BR>

<h2><center>
vi Reference Card
</center></h2>
<p>
<h3>
SETTING THE TERMINAL TYPE
</h3><p>
Bourne Shell<br>
TERM=name<br>
export TERM<br>
<p>
Korn Shell<br>
export TERM=name<br>
<p>
C Shell<br>
set term=name<br>
<p>
<h3>
UNDOING/CANCELING COMMANDS
</h3><pre>
ESC         Cancels unexecuted vi command
interrupt*  Stops in-progress command
u           Counteracts last command that changed in the buffer
U           Counteracts changes to current line

*This character is user dependent. See your system administrator 
for the specific character
</pre>
<p><h3>
REPEATING A COMMAND
</h3><pre>
.           Repeats the last command that changed the buffer.
</pre>
<p><h3>
ENTERING vi / READING IN A FILE
</h3><pre>
vi filename   Enters vi, reads in filename
vi arglist    Enters vi, reads in first file in arglist
:n            Already in vi, edits next file in arglist
:n arglist    Already in vi, specifies new arglist
:e filename   Already in vi, edits different file
:e#           Already in vi, returns to original file
:e! filename  Already in vi, edit filename; discards previous 
	      buffer
:r filename   Already in vi, places copy of filename below 
	      the current line
CONTROL-g     displays current file name and line number of 
	      current line
</pre><p><h4>
Options when entering:
</h4><p>
   vi options filename
<p>
options:<br><pre>
-l        LISP mode
-r        Recovers file after editor or system crash
-R        Read only mode
-t tag    Start editing at tab
+/string  Search for string
</pre><p>
<h3>
SAVING WORK / EXITING
</h3><pre>
:w                Writes file under original name
ZZ or :wq         Writes file under original name, exits vi
:q                Exits vi if no modifications were made since 
		  the last write
:q!               Exits vi, no changes are saved
:w filename       Writes the file under filename
:w! filename      Writes the file under filename; overwrites 
		  existing filename
:x,y w filename   Writes lines x through y under filename
:x,y w! filename  Writes lines x through y under filename; 
		  overwrites existing filename
</pre><p>
<h3>
DISPLAYING LINE NUMBERS
</h3><pre>
CONTROL-g      Displays line number of current line
:set number    Displays all line numbers, to left of each line
:set nonumber  Removes all displayed line numbers
</pre><p><h3>
ADDRESSING LINES
</h3><p>
(For ex command lines)
<p>
Line numbers
<p>
Special symbols
<p><pre>
.     Current line
^     First line in file
$     Last line in file
%     All lines in file
</pre><p>
Relative lines
<p><pre>
+     One line below the current line
-     One line above the current line
+#    # lines below the current line
-#    # lines above the current line
</pre><p>
Search strings
<p><pre>
/string/     First occurrence of string below the current line
?string?     First occurrence of string above the current line
</pre><p>
Markers
<p><pre>
m/    Marks the current line with lowercase letter /
'/    Refers to line with marker /
`/    Refers to the character with marker /
</pre><p>
<h3>
INSERTING TEXT
</h3><p>
Inserting Text<br><pre>
i     Inserts before the current character
a     Inserts after the current character
A     Inserts at end of current line
I     Inserts at beginning of current line
o     Inserts below current line (opens new line)
O     Inserts above current line (opens new line)
ESC   Ends the text insertion
</pre><p>
Replacing Text<br><pre>
r     Replaces the current character; no ESC necessary
s     Replaces the current character
cw    Replaces the current word
S     Replaces the current line
C     Replaces from current cursor position to end of line
R     Replaces from current cursor position to end of line; 
      does not change characters not typed over
ESC   Ends the text insertion
</pre><p>
Erasing During Insertion
<br><pre>
CONTROL-h or erase*  Erases characters, moves left
CONTROL-w            Erases words, moves left
kill*                Erases the current line
</pre><p>
Setting Margins
<br><pre>
set wrapmargin=x     Sets right margin of x; automatic word 
		     wrap
</pre><p>
Setting Automatic Indentation
<br><pre>
:set autoindent   Sets automatic indentation
:set noai         Turns off automatic indentation
CONTROL-d         Moves left one tabstop
CONTROL-t         Moves right one tabstop

* These characters are user dependent. See your system 
administrator for specific characters.
</pre><p>
<h3>
JOINING LINES
</h3><pre>
J     Joins the current line and the line below it
#J    Joins # lines, starting with the current line
</pre><p>
<h3>
SHIFTING TEXT
</h3><pre>
&gt;&gt;    Shifts current line right one tab stop
&lt;&lt;    Shifts current line left one tab stop
&gt;'a   Shifts from current line through line with marker a, 
      right one tabstop
</pre>
<p><h3>
CHANGING CASE
</h3><pre>
~     Changes case of current character
</pre>
<p><h3>
MOVING AROUND IN A FILE
</h3><p>
Moving by Characters<br><pre>
h or BACKSPACE    Moves left one character
j                 Moves down one line
k                 Moves up one line
l or space bar    Moves right one character
</pre><p>
Moving by Words<br><pre>
w     Moves right one word or group of punctuation marks
b     Moves left one word or group of punctuation marks
e     Moves to the end of a word or group of punctuation 
      marks
W     Moves right one word
B     Moves left one word
E     Moves to the end of a word
</pre><p>
Moving by Lines<br><pre>
0          Moves to beginning of current line
$          Moves to end of current line
RETURN     Moves to 1st non-whitespace char. at beg. 
	   of next line
- (minus)  Moves to 1st non-whitespace char. at beg. 
	   of previous line
H          Moves to top line on screen
L          Moves to bottom line on screen
M          Moves to middle line on screen
G          Moves to end of file
xG         Moves to line number x
'/         Moves to first character in line marked with /
`/         Moves to character marked with /
''         Moves to prev. location (counteracts G or 
           simple search)
</pre><p>
Scrolling<br><pre>
CONTROL-e  Scrolls up one line
CONTROL-y  Scrolls down one line
CONTROL-f  Scrolls forward one screen
CONTROL-b  Scrolls backward one screen
CONTROL-d  Scrolls forward half screen
CONTROL-u  Scrolls backward half screen
z<RETURN>  Redraws screen, current line at top of screen
z-         Redraws screen, current line at boggom of 
	   screen
z.         Redraws screen screen, current line at center 
 	   of screen
</pre><p>
Moving by sentences/paragraphs<br><pre>
)      Moves to next sentence
(      Moves to previous sentence
}      Moves to next paragraph
{      Moves to previous paragraph
</pre><p>
Moving to a column<br><pre>
#|     Moves to column number #.
</pre><p>
<h3>
DELETING TEXT
</h3><pre>
x      Deletes the current character
#x     Deletes # characters, starting with current 
       character
dw     Deletes current word
#dw    Deletes # words, starting with current word
dd     Deletes the current line
#dd    Deletes # lines, starting with current line
D      Deletes from current cursor position to end of line
:x,yd  Deletes lines x through y
d'/    Deletes from current line to line with marker /
</pre>
<p><h3>
COPYING TEXT
</h3><p>
Making a Copy<br><pre>
y      Yanks current character
#y     Yanks # characters, starting with current character
yw     Yanks current word
#yw    Yanks # words, starting with current word
yy     Yanks current line
#yy    Yanks # lines, starting with current line
:x,yy  Yanks lines x through y
y'/    Yanks from current line to line with marker /
</pre><p>
<h3>
RETRIEVING TEXT
</h3><pre>
p     Places most recently deleted or yanked character(s) 
      or word(s) after the current character; places 
      line(s) below the current line
P     Places most recently deleted or yanked character(s) 
      or word(s) before the current character; places 
      line(s) above the current line
</pre><p>
<h3>
TEXT BUFFERS
</h3><p>
Automatic Number Buffers (1-9)<br><pre>
"#p     Places text from buffer # below current line
"#P     Places text from buffer # above current line
</pre><p>
Named Buffers (a-z)<br><pre>
"b command  Places text deleted or yanked with command 
	    into buffer b
"bp         Places text from buffer b below current line
"bP         Places text from buffer b above current line
</pre><p>
<h3>
MOVING BY LINE NUMBER
</h3><pre>
:xmz     Moves line x below line z
:x,ymz   Moves lines x through y below line z
</pre><p>	
<h3>
COPYING BY LINE NUMBER
</h3><pre>
:xtz     Copies line x below line z
:x,ytz   Copies lines x through y below line z
</pre><p>
<h3>
SEARCHES
</h3><p>
Searching in a line<br><pre>
f c     Moves forward to find character c on 
	current line; cursor rests on c.
t c     Moves forward to find character c on 
	current line; cursor rests on character 
	before c.
F c     Moves backwards to find character c on 
	current line; cursor rests on c.
T c     Moves backwards to find character c 
	on current line; cursor rests on character 
	after c.
;       Repeats last f, F, t, or T
,       Inverse of last f, F, t, or T
</pre><p>
Simple search<br><pre>
/string          Searches forward in the file for string
?string          Searches backward in the file for string
n                Subsequent searches in the same direction
N                Subsequent searches in the opposite direction
:set wrapscan    Sets wrapping during a search
:set nowrapscan  Sets no wrapping during a search
</pre><p>
Global search<br><pre>
:g/string/ command   command affects lines containing string.
:v/string/command    command affects lines not containing 
		     string.
</pre><p>
Substitution (search and replace)
<br><pre>
:x,ys/oldstring/newstring/flags   where

x,y         Line numbers in which the substitution is to 
	    occur. Give one line number, or two separated 
	    by a comma, which indicate a range of lines. 
	    Absence of line numbers indicates current
            line.

s           Substitution command. Only the first occurrence 
	    of the string on the selected line(s) is replaced 
	    unless the g flag, described below, is used.

/oldstring  String to replace. If you do not specify an 
	    oldstring, vi searches for the oldstring 
	    specified in the last s command or search 
	    (if there was one).

/newstring  Replacement string

/flags   Optional; specify type of search:
     c   waits for confirmation before substituting. 
	 Type y or n and press RETURN.
     g   replaces all occurrences of the string in 
	 specified lines
</pre><p>
Special characters in searches<p>
Character Classes<br><pre>
[cccc]     Matches any specified letter or number
[^ccccc]   Matches all letters or numbers except those 
	   specified
[c1-c2]    Matches all letters or numbers in specified 
	   range
</pre><p>
Characters at Specified Locations<br><pre>
&lt;cc     Matches words that begin with cc
&gt;cc     Matches words that end in cc
^       Matches beginning of lines
^cccc   Matches lines that begin with cccc
$       Matches end of lines
cccc$   Matches lines that end with cccc
</pre><p>
Wildcard and Multiplier Characters<br><pre>			
.	Matches any one character
*	Matches zero or more occurrences of the preceding 
	character
.*	Matches any number of characters
</pre><p>
Matching Special Characters ($.*[]^)<br><pre>	
   Precede the special character with  (backslash)
</pre><p>
Matching Occurrences<br><pre>
{#}        Matches # occurrences of preceding search string
{#,}       Matches at least # occurrences of preceding 
	   search string
{#1,#2}    Matches between #1 and #2 occurrences of 
	   preceding search string
(string)#  Matches string followed by # occurrences of string
</pre><p>
Special replacement characters<br><pre>
(substitution only)
&amp;     Substitutes the search string
%     Repeats last replacement string

Case in a search
:set ignorecase   Case ignored in a search
:set noic         Case distinguished in a search
</pre>
<p><h3>
MISCELLANEOUS
</h3><pre>
%     Moves to matching (, ), [, ], {, or }.
</pre>
<p><h3>
SHELL COMMANDS
</h3><pre>
:!command     Executes one shell command
:sh           Runs subshell. Type exit and press RETURN 
	      to return to vi.
:r !command   Inserts output of shell command below current line
</pre><p><h3>
RECOVERING A FILE
</h3><pre>
vi -r filename  Recovers file lost during system crash or line
                   disconnection
vi -r           Lists all recoverable files
</pre><p><h3>
SETTING vi CHARACTERISTICS
</h3><pre>
.exrc     File containing ex commands to execute at vi startup
EXINIT    Environment variable whose value is interpreted as 
             ex commands. EXINIT executes at vi startup
</pre><p><h3>
REDRAWING THE SCREEN
</h3><pre>
CONTROL-l   Clears and redraws screen
CONTROL-r   Retypes screen and removes @ lines (slow and 
	    dumb terminals only)
</pre><p>

<br>

<IMG SRC="http://www.asu.edu/it/fyi/menus/images/yellow-bar.GIF" WIDTH="579" HEIGHT="12" ALIGN="BOTTOM" BORDER="0" NATURALSIZEFLAG="3"><BR>
<FONT SIZE="-2" FACE="Arial, Helvetica, Verdana, Arial Narrow">
<A HREF="http://www.asu.edu/it/fyi/">FYI Home</a> | <A HREF="http://www.asu.edu/it/fyi/search/">FYI Search</A> | <A HREF="http://www.asu.edu/">ASU Home</a> | <A HREF="http://www.asu.edu/asuweb/disclaimer">ASU Disclaimer</A><br>
<A HREF="mailto:unix-q@asu.edu">unix-q@asu.edu</A></FONT><br>
 <FONT SIZE="-2" FACE="Arial, Helvetica, Verdana, Arial Narrow">
 Page Last Updated: Tuesday September  7, 1999</FONT><BR>
<align=right>
<script src="http://www.asu.edu/it/fyi/includes/fyiwatermark.js">
</script>


</body>

</html>
