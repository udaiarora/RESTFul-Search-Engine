<HTML>
<!-- This page produced Fri Jul  9 14:14:38 EDT 1999
 -->
<!-- Used program version 1.118.1.2 from beta -->
<HEAD>
<!-- <META http-equiv="Content-Type" content="text/html; charset="> -->
<TITLE>The GCHART Procedure : Creating Bar Charts with Drill-down for the Web </TITLE></HEAD>
<BODY bgcolor="#FFFFFF">
<!-- navigation -->
<TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0723580.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z3n08-ex.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="z3n09-ex.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
</TR></TABLE>
<!-- running head -->
<TABLE width="100%" cellpadding="4">
<TR valign="MIDDLE">
<TD bgcolor="#CCCC99"><I><FONT size="2">The GCHART Procedure</FONT></I></TD>
</TR>
</TABLE><H1><FONT size="5"><A name="z3n05-ex">Example 7: Creating Bar Charts with Drill-down for the Web</A></FONT></H1>
<HR>

<TABLE cellpadding="4" cellspacing="2">
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B><B>Procedure Features:</B></B></TD>
<TD bgcolor="#CCCCCC" align="left">
<TABLE cellpadding="4" cellspacing="0">
<TR valign="top"><TD> VBAR3D statement</TD></TR></TABLE>
</TD></TR>
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B><B>ODS Features:</B></B></TD>
<TD bgcolor="#CCCCCC" align="left">
<TABLE cellpadding="4" cellspacing="0">
<TR valign="top"><TD> ODS HTML statement:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> ANCHOR=</TD></TR>
<TR valign="top"><TD></TD><TD> BODY=</TD></TR>
<TR valign="top"><TD></TD><TD>CONTENTS=</TD></TR>
<TR valign="top"><TD></TD><TD>FRAME=</TD></TR>
<TR valign="top"><TD></TD><TD> NEWFILE</TD></TR>
<TR valign="top"><TD></TD><TD>NOGTITLE</TD></TR>
<TR valign="top"><TD></TD><TD>PATH=</TD></TR></TABLE></TD></TR></TABLE>
</TD></TR>
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B><B>Other Features:</B></B></TD>
<TD bgcolor="#CCCCCC" align="left">
<TABLE cellpadding="4" cellspacing="0">
<TR valign="top"><TD> AXIS statement</TD></TR>
<TR valign="top"><TD> BY statement</TD></TR>
<TR valign="top"><TD> FORMAT
statement</TD></TR>
<TR valign="top"><TD> GOPTIONS statement</TD></TR>
<TR valign="top"><TD> LEGEND statement</TD></TR>
<TR valign="top"><TD> PATTERN
statement</TD></TR>
<TR valign="top"><TD> RUN-group processing</TD></TR>
<TR valign="top"><TD> TITLE statement</TD></TR>
<TR valign="top"><TD> WHERE
statement</TD></TR></TABLE>
</TD></TR>
<TR valign="top">
<TD align="right" bgcolor="#F5F5F5" nowrap><B><B>Sample library member:</B></B></TD>
<TD bgcolor="#CCCCCC" align="left">  GR13N07
</TD></TR>
</TABLE>
<HR>

<P><A name="z0756217">&#13;This example shows how  to create 3D bar charts  with drill-down
functionality for the Web. In addition to showing how to use the ODS HTML
statement and the HTML options to create the drill-down, the example also
illustrates other  VBAR3D statement options.</A>
<P>For creating output with drill-down for the Web, the
example shows how to 
<P>
<UL>

<LI>explicitly name the HTML files and open and close
them throughout the program<P>

<LI>specify names and destination for the GIF files
created by the ODS HTML statement and the GIF device driver<P>

<LI>assign anchor names to the graphics output<P>

<LI>use the  HTML=
and HTML_LEGEND= procedure options
to assign link targets<P>

<LI>use BY-group processing to store multiple graphs
in one file or in individual files<P>

<LI>use incremented anchor names and incremented file
names.<P>
</UL>

<P>For more information, see <A href="zodschap.htm">ODS HTML Statement</A> in
<A href="z0724351.htm">SAS/GRAPH Statements</A>.
<P>For creating 3D bar charts, the example shows how to

<P>
<UL>

<LI>group the midpoints, including patterning bars
by group, modifying the group axis, adjusting the space between groups of
bars<P>

<LI>identify midpoint values with a legend instead
of labeling each bar<P>

<LI>subgroup bars<P>

<LI>remove an axis and its axis plane<P>

<LI>add
reference lines.<P>
</UL>

<P>The introduction to each part lists the VBAR3D options
that it features.
<P>The program generates twelve linked bar charts that
display data about the world's leading grain producers.  The data contain
the amount of grain produced by five countries in 1995 and 1996. Each of these
countries is one of the three leading producers of wheat, rice, or corn, worldwide.
<P>The first chart, shown in
<A href="#zs-start">Browser View of Overview Graph</A> as it appears in a browser, is an overview
of the data that shows the total grain production for the five countries for
both years. 
<P>
<B><I><A name="zs-start">Browser View of Overview Graph</A></I></B><BR>


<P><IMG border="0" src="./images/01329256.gif" vspace="12" alt="[IMAGE]">
<P>
<P>The next two charts break down grain
production by year.
These charts are linked to the legend values in <A href="#zs-start">Browser View of Overview Graph</A>. For example, when you select the legend
value for 1995, the graph in <A href="#z-year95">Browser View of Year Breakdown for 1995</A> appears. 
<P>
<B><I><A name="z-year95">Browser View of Year Breakdown for 1995</A></I></B><BR>


<P><IMG border="0" src="./images/01329257.gif" vspace="12" alt="[IMAGE]">
<P>
<P>Another group of charts breaks down the data
by country.
These charts are linked to the bars. For example, when you drill down on the
bar for China in either  <A href="#zs-start">Browser View of Overview Graph</A>
or <A href="#z-year95">Browser View of Year Breakdown for 1995</A>,
the graph in  <A href="#zs-china">Browser View of Breakdown for China</A>
appears. 
<P>
<B><I><A name="zs-china">Browser View of Breakdown for China</A></I></B><BR>


<P><IMG border="0" src="./images/01329258.gif" vspace="12" alt="[IMAGE]">
<P>
<P>Finally the data is charted by grain type.
These graphs
are linked to the bars in <A href="#zs-china">Browser View of Breakdown for China</A>.
If you select the legend value or bar for 


<CODE><B>Rice</B></CODE>, <A href="#zds-rice">Browser View of Breakdown for Rice</A> appears. 
<P>
<B><I><A name="zds-rice">Browser View of Breakdown for Rice</A></I></B><BR>


<P><IMG border="0" src="./images/01329259.gif" vspace="12" alt="[IMAGE]">
<P>
<P>This program is divided into four parts:

<P>
<UL>

<LI><A href="#zt-ods-a">Example 7, Part A</A>
generates the graph shown in
<A href="#zs-start">Browser View of Overview Graph</A>.<P>

<LI><A href="#zt-ods-b">Example 7, Part B</A>
generates the pair of graphs represented by
<A href="#z-year95">Browser View of Year Breakdown for 1995</A>.<P>

<LI><A href="#zt-ods-c">Example 7, Part C</A>
generates the five graphs represented by 
<A href="#zs-china">Browser View of Breakdown for China</A>.<P>

<LI><A href="#zt-ods-d">Example 7, Part D</A>
generates the three graphs represented by  <A href="#zds-rice">Browser View of Breakdown for Rice</A>.<P>
</UL>

<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5"><A name="zt-ods-a">Example 7, Part A</A></FONT></B></TD></TR></TABLE>

<TABLE cellpadding="5" cellspacing="0">
<TR align=left valign="top">
<TD><B>Features:</B></TD>
<TD align="left">VBAR3D options:
<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> DES=</TD></TR>
<TR valign="top"><TD></TD><TD> DISCRETE</TD></TR>
<TR valign="top"><TD></TD><TD>GROUP=</TD></TR>
<TR valign="top"><TD></TD><TD>GSPACE=</TD></TR>
<TR valign="top"><TD></TD><TD> HTML=</TD></TR>
<TR valign="top"><TD></TD><TD> HTML_LEGEND=</TD></TR>
<TR valign="top"><TD></TD><TD>NAME=</TD></TR>
<TR valign="top"><TD></TD><TD>SUBGROUP=</TD></TR></TABLE></TD></TR>

<TR align=left valign="top">
<TD> </TD>
<TD align="left">ODS HTML options:
<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> BODY=</TD></TR>
<TR valign="top"><TD></TD><TD> CONTENTS=</TD></TR>
<TR valign="top"><TD></TD><TD>FRAME=</TD></TR>
<TR valign="top"><TD></TD><TD>GPATH=</TD></TR>
<TR valign="top"><TD></TD><TD> NOGTITLE</TD></TR></TABLE></TD></TR>
</TABLE>

<P>The first part of the
program, which includes setting
the graphics environment and creating the data set,  does the following:  
<P>
<UL>

<LI>Adds three HTML variables to the data set. The
variables contain the link targets for all of the graphs that support drill-down
functionality.  The HREF values for the HTML variables in the data set contain
this information about the link targets:   
<P>
<UL>

<LI>the name of the body file that is the target.
BODY= in the ODS HTML statement names the body file. <P>

<LI>the anchor name of the output if the target file
contains more than one graph. By default, all output is assigned a unique
anchor name unless you specify a name with ANCHOR= in the ODS HTML statement.<P>
</UL>
 <P>

<LI>Opens the HTML destination for the frame and
contents
files and the first body file. <P>

<LI>Creates one grouped 3D vertical bar chart (shown
in <A href="#zs-start">Browser View of Overview Graph</A>)
with drill-down on the bars and legend values.  The bars, which represent
total production for each year for each country, are grouped and labeled by
COUNTRY.  Instead of displaying the year below each bar, the program suppresses
the midpoint values with an AXIS statement and creates a legend that associates
bar color and year.  To create the legend, the chart variable YEAR is assigned
to the SUBGROUP= option.  Because the chart variable and the subgroup variable
are the same, each bar contains only one "subgroup." As a result, the subgroup
legend has an entry for each value of YEAR, thereby creating a legend for
the midpoints.  The values of COUNTRY label each group of bars. <P>

<LI>Assigns the HTML variables that contain link information
for the bars and for the legend values to the HTML= and HTML_LEGEND= options,
respectively.<P>
</UL>

<P>
<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z1003536">&nbsp;</A><A href="z1003536.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>filename odsout '<I>path-to-Web-server-space</I>';</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737742">&nbsp;</A><A href="z0737742.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods listing close;
goptions reset=global gunit=pct
         htitle=6 htext=4 ftitle=zapfb ftext=swiss;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737744">&nbsp;</A><A href="z0737744.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>data grainldr;
   length country $ 3 type $ 5;
   input year country $ type $ amount;
   megtons=amount/1000;
   datalines;
1995 BRZ  Wheat    1516
1995 BRZ  Rice     11236
1995 BRZ  Corn     36276
1995 CHN  Wheat    102207
1995 CHN  Rice     185226
1995 CHN  Corn     112331
1995 IND  Wheat    63007
1995 IND  Rice     122372
1995 IND  Corn     9800
1995 INS  Wheat    .
1995 INS  Rice     49860
1995 INS  Corn     8223
1995 USA  Wheat    59494
1995 USA  Rice     7888
1995 USA  Corn     187300
1996 BRZ  Wheat    3302
1996 BRZ  Rice     10035
1996 BRZ  Corn     31975
1996 CHN  Wheat    109000
1996 CHN  Rice     190100
1996 CHN  Corn     119350
1996 IND  Wheat    62620
1996 IND  Rice     120012
1996 IND  Corn     8660
1996 INS  Wheat    .
1996 INS  Rice     51165
1996 INS  Corn     8925
1996 USA  Wheat    62099
1996 USA  Rice     7771
1996 USA  Corn     236064
;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737745">&nbsp;</A><A href="z0737745.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>data newgrain;
     set grainldr;
     length yeardrill typedrill countrydrill $ 40;
     if year=1995 then
        yeardrill='HREF="year95_body.html"';
     else if year=1996 then
        yeardrill='HREF="year96_body.html"'; </PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737746">&nbsp;</A><A href="z0737746.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>     if country='BRZ' then
        countrydrill='HREF="country_body.html#country"';
     else if country='CHN' then
        countrydrill='HREF="country_body.html#country1"';
     else if country='IND' then
        countrydrill='HREF="country_body.html#country2"';
     else if country='INS' then
        countrydrill='HREF="country_body.html#country3"';
     else if country='USA' then
        countrydrill='HREF="country_body.html#country4"';</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737747">&nbsp;</A><A href="z0737747.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>     if type='Corn' then
        typedrill='HREF="type1_body.html"';
     else if type='Rice' then
        typedrill='HREF="type2_body.html"';
     else if type='Wheat' then
        typedrill='HREF="type3_body.html"';
 run;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737748">&nbsp;</A><A href="z0737748.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE> proc format;
      value $country 'BRZ' = 'Brazil'
                     'CHN' = 'China'
                     'IND' = 'India'
                     'INS' = 'Indonesia'
                     'USA' = 'United States';
 run;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737749">&nbsp;</A><A href="z0737749.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE> pattern1 color=blue;
 pattern2 color=green;
 pattern3 color=cyan; </PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737750">&nbsp;</A><A href="z0737750.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE> legend1 label=none
         shape=bar(4,4)
         position=(bottom center)
         offset=(-3);</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737751">&nbsp;</A><A href="z0737751.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE> goptions transparency device=gif noborder;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737753">&nbsp;</A><A href="z0737753.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE> ods html body='grain_body.html'
          frame='grain_frame.html'
          contents='grain_contents.html'
          path=odsout
          nogtitle;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737754">&nbsp;</A><A href="z0737754.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>axis1 label=none value=none;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737755">&nbsp;</A><A href="z0737755.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>axis2 label=(angle=90 'Metric Tons (millions)')
      minor=(n=1)
      order=(0 to 500 by 100)
      offset=(0,0);</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737756">&nbsp;</A><A href="z0737756.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>axis3 label=none
      order=('China' 'United States' 'India'
             'Indonesia' 'Brazil')
      split=' ';</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737757">&nbsp;</A><A href="z0737757.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>title1 'Corn, Rice, and Wheat Production';
title2 h=2 'Leading Producers for 1995 and 1996';
footnote1 j=l h=3 'click on bars or legend values' j=r h=3 'GRAINALL ';</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737758">&nbsp;</A><A href="z0737758.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>proc gchart data=newgrain;
     format country $country.;
     vbar3d year / discrete
                   sumvar=megtons
                   group=country
                   subgroup=year
                   legend=legend1
                   space=0
                   width=5
                   gspace=5
                   maxis=axis1
                   raxis=axis2
                   gaxis=axis3
                   cframe=grayaa
                   coutline=black </PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737759">&nbsp;</A><A href="z0737759.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>                   html=countrydrill
                   html_legend=yeardrill
                   name='grainall'
                   des='Overview of leading grain producers';
 run;</PRE></TD></TR></TABLE>
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5"><A name="zt-ods-b">Example 7, Part B</A></FONT></B></TD></TR></TABLE>

<TABLE cellpadding="5" cellspacing="0">
<TR align=left valign="top">
<TD><B>Features:</B></TD>
<TD align="left"> VBAR3D options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> AUTOREF</TD></TR>
<TR valign="top"><TD></TD><TD>HTML=</TD></TR>
<TR valign="top"><TD></TD><TD>HTML_LEGEND=</TD></TR>
<TR valign="top"><TD></TD><TD>SUBGROUP=</TD></TR>
<TR valign="top"><TD></TD><TD> SPACE=</TD></TR>
<TR valign="top"><TD></TD><TD>NAME=</TD></TR></TABLE></TD></TR>

<TR align=left valign="top">
<TD> </TD>
<TD align="left">ODS HTML options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> BODY=</TD></TR></TABLE></TD></TR>
</TABLE>

<P>In the second part, the PROC GCHART step continues,
using RUN-group processing and WHERE statements to produce two graphs of grain
production for each year, one of which is shown in <A href="#z-year95">Browser View of Year Breakdown for 1995</A>.  Each bar represents a country and is
subgrouped by grain type. As before, both the bars and the legend values are
links to other graphs.  The bars link to targets stored in COUNTRYDRILL and
the legend values link to targets in TYPEDRILL.  These two graphs not only
 <B>contain</B> links, they  <B>are</B> the link targets for the
legend values in <A href="#zs-start">Browser View of Overview Graph</A>.
 Before each graph is generated, the ODS HTML statement opens a new body file
in which to store the output.  Because each of these graphs is stored in a
separate file, the HREF attributes that are stored in the variable YEARDRILL
point only to the file.  The name of the file is specified by the BODY= option
in the ODS HTML statement.  For example, this is the HREF attribute that points
to the graph of 1995 and is stored in the variable YEARDRILL: 



<PRE>HREF=year95_body.html</PRE>YEARDRILL is assigned to the HTML_LEGEND= option
in Part A.
<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737760">&nbsp;</A><A href="z0737760.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods html body='year95_body.html' path=odsout;</PRE></TD></TR></TABLE>
<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737761">&nbsp;</A><A href="z0737761.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>title1 'Total Production for 1995';
footnote1 j=l h=3 'click on bars or legend values' j=r h=3 'YEAR95 ';</PRE></TD></TR></TABLE>
<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737762">&nbsp;</A><A href="z0737762.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>where year=1995;
vbar3d country / sumvar=megtons
                 subgroup=type
                 autoref
                 html=countrydrill
                 html_legend=typedrill
                 legend=legend1
                 cframe=grayaa
                 space=3
                 coutline=black
                 maxis=axis3
                 raxis=axis2
                 name='year95'
                 des='Production Breakdown for 1995';
run;</PRE></TD></TR></TABLE>
<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737763">&nbsp;</A><A href="z0737763.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods html body='year96_body.html' path=odsout;</PRE></TD></TR></TABLE>
<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737764">&nbsp;</A><A href="z0737764.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>title1 'Total Production for 1996';
footnote1 j=l h=3 'click on bars or legend values' j=r h=3 'YEAR96 ';</PRE></TD></TR></TABLE>
<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737765">&nbsp;</A><A href="z0737765.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>where year=1996;
vbar3d country / sumvar=megtons
                 subgroup=type
                 autoref
                 html=countrydrill
                 html_legend=typedrill
                 legend=legend1
                 cframe=grayaa
                 space=3
                 coutline=black
                 maxis=axis3
                 raxis=axis2
                 name='year96'
                 des='Production Breakdown for 1996';
run;
quit; </PRE></TD></TR></TABLE>
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5"><A name="zt-ods-c">Example 7, Part C</A></FONT></B></TD></TR></TABLE>

<TABLE cellpadding="5" cellspacing="0">
<TR align=left valign="top">
<TD><B>Features:</B></TD>
<TD align="left">VBAR3D options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> DES=</TD></TR>
<TR valign="top"><TD></TD><TD> GAXIS=</TD></TR>
<TR valign="top"><TD></TD><TD><A name="z0756303">&#13; GROUP=</A></TD></TR>
<TR valign="top"><TD></TD><TD> HTML=</TD></TR>
<TR valign="top"><TD></TD><TD>NAME=</TD></TR>
<TR valign="top"><TD></TD><TD>OUTSIDE=</TD></TR>
<TR valign="top"><TD></TD><TD> PATTERNID=</TD></TR>
<TR valign="top"><TD></TD><TD>RAXIS=</TD></TR>
<TR valign="top"><TD></TD><TD>SHAPE=</TD></TR></TABLE></TD></TR>

<TR align=left valign="top">
<TD> </TD>
<TD align="left">ODS HTML
options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> BODY=</TD></TR>
<TR valign="top"><TD></TD><TD> ANCHOR=</TD></TR></TABLE></TD></TR>
</TABLE>

<P>The third part
produces the five graphs that show the
breakdowns by country.  These graphs are generated with BY-group processing
and are all stored in one body file.  When the file is displayed in the browser,
all the graphs appear in one frame that can be scrolled.  Because the graphs
are stored in one file, the links to them must explicitly point to the location
of each graph in the file, not just to the file.  This location is defined
by an anchor. ODS HTML assigns anchor names by default, but you can specify
anchor names with the ANCHOR= option.  When the procedure uses BY-group processing
to generate multiple pieces of output, ODS automatically increments the anchor
name to produce a unique name for each graph. This example assigns the base
name {mono country} to ANCHOR=. The graphs created by this part are referenced
by the COUNTRYDRILL variable.   With BY-group processing the catalog entry
name also increments automatically. NAME= specifies <B>country</B> as
the base name for the graphics output.  Because you cannot specify a different
description for each graph, DES= specifies a generic description for the HTML
Table of Contents.



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737766">&nbsp;</A><A href="z0737766.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>proc sort data=newgrain out=country;
by country;
run;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737767">&nbsp;</A><A href="z0737767.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods html body='country_body.html'
         anchor='country'
         gfootnote
         path=odsout; </PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737768">&nbsp;</A><A href="z0737768.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>axis2 order=(0 to 250 by 50)
      label=none
      value=none
      style=0
      major=none
      minor=none
      noplane;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737769">&nbsp;</A><A href="z0737769.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>axis4 label=none;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737770">&nbsp;</A><A href="z0737770.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>options nobyline;
title1 'Breakdown for #byval(country)';
footnote1 j=l h=3 'click on bars';
footnote2 j=c '(Millions of Metric Tons)';</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737771">&nbsp;</A><A href="z0737771.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>proc gchart data=country;
     format country $country.;
     by country;
     vbar3d year / discrete
                   sumvar=megtons
                   patternid=group
                   group=type
                   shape=hexagon
                   outside=sum
                   html=typedrill
                   width=12
                   gspace=3
                   space=0
                   cframe=grayaa
                   raxis=axis2
                   gaxis=axis4
                   maxis=axis4
                   name='country'
                   des='Grain and Year Breakdown';
 run;</PRE></TD></TR></TABLE>
<P><TABLE width="100%" cellpadding="0" cellspacing="0">
<TR valign="bottom"><TD><HR></TD></TR>
<TR valign="top"><TD><B><FONT size="5"><A name="zt-ods-d">Example 7, Part D</A></FONT></B></TD></TR></TABLE>

<TABLE cellpadding="5" cellspacing="0">
<TR align=left valign="top">
<TD><B>Features:</B></TD>
<TD align="left">VBAR3D options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> INSIDE=</TD></TR>
<TR valign="top"><TD></TD><TD> NOZERO</TD></TR></TABLE></TD></TR>

<TR align=left valign="top">
<TD> </TD>
<TD align="left">ODS HTML options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> BODY=</TD></TR>
<TR valign="top"><TD></TD><TD> NEWFILE=TABLE</TD></TR></TABLE></TD></TR>
</TABLE>

<P>Like Part C,
this part uses BY-group processing to generate
three graphs that show the three leading producers for each type of grain.
The program subsets the data and suppresses midpoints with no observations.
 Instead of storing all of the output in one body file, it stores each graph
in a separate file. To do this, the program uses the ODS HTML option NEWFILE=TABLE.
 When NEWFILE=TABLE is used with BY-group processing, each new piece of output
automatically generates a new body file and simply increments the name of
the file that is specified by BODY=.  Because each graph is stored in a separate
file, the links to these graphs reference only the file name and do not require
an anchor name. The graphs created by this part are referenced by the TYPEDRILL
variable.



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737772">&nbsp;</A><A href="z0737772.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>proc sort data=grainldr out=type;
by type;
run;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737773">&nbsp;</A><A href="z0737773.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods html body='type1_body.html'
         newfile=table
         path=odsout;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737774">&nbsp;</A><A href="z0737774.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>axis5 label=none
      split=' ';</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737775">&nbsp;</A><A href="z0737775.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>title1 'Top Three Producers of #byval(type)';
title2 '(In Millions of Metric Tons)';
footnote j=r h=3 'TYPE '; </PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737776">&nbsp;</A><A href="z0737776.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>proc gchart data=type (where=(megtons gt 31));
     format country $country.;
     by type;
     vbar3d year / discrete
                   sumvar=megtons
                   group=country
                   nozero
                   shape=cylinder
                   noframe
                   patternid=group
                   inside=sum
                   width=12
                   maxis=axis4
                   raxis=axis2
                   gaxis=axis5
                   cframe=grayaa
                   name='type'
                   des='Leading Producers';
 run;
 quit;</PRE></TD></TR></TABLE>



<TABLE cellspacing="0" cellpadding="6" border="0">
<TR valign="top">
<TD ><A name="z0737777">&nbsp;</A><A href="z0737777.htm"><IMG border="0" src="../common/images/snbut.gif" height="24" width="24" alt="Note about code"></A></TD><TD><PRE>ods html close;
ods listing;</PRE></TD></TR></TABLE>

<P><!-- navigation -->
<P><TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0723580.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z3n08-ex.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="z3n09-ex.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
<TD align="center">
<A href="#z3n05-ex">
<IMG border="0" SRC="../common/images/top1.gif"><BR><FONT size="-2">Top of Page</FONT></A></TD>
</TR></TABLE>
<P><FONT size=1><A href="../common/images/copyrite.htm">Copyright 1999 by SAS Institute Inc., Cary, NC, USA. All rights reserved.</A></FONT>
</BODY>
</HTML>