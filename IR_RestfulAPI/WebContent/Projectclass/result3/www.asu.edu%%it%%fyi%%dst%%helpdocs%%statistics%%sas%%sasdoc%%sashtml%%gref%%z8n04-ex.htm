<HTML>
<!-- This page produced Fri Jul  9 14:14:38 EDT 1999
 -->
<!-- Used program version 1.118.1.2 from beta -->
<HEAD>
<!-- <META http-equiv="Content-Type" content="text/html; charset="> -->
<TITLE>SAS/GRAPH Statements : Example 7.  Using BY-group Processing to Generate a Series of Charts </TITLE></HEAD>
<BODY bgcolor="#FFFFFF">
<!-- navigation -->
<TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0724351.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z8n06-ex.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="zods0-ex.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
</TR></TABLE>
<!-- running head -->
<TABLE width="100%" cellpadding="4">
<TR valign="MIDDLE">
<TD bgcolor="#CCCC99"><I><FONT size="2">SAS/GRAPH Software: Reference                                                                                             </FONT></I></TD>
</TR>
</TABLE><H1><FONT size="5"><A name="z8n04-ex">Example 7.  Using BY-group Processing to Generate a Series of Charts</A></FONT></H1>


<P><A name="z0752133">&#13;<B>Features:</B>


</A>
<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>AXIS statement  options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD> LABEL=</TD></TR>
<TR valign="top"><TD></TD><TD>  MAJOR=</TD></TR>
<TR valign="top"><TD></TD><TD> MINOR=</TD></TR>
<TR valign="top"><TD></TD><TD> NOPLANE</TD></TR>
<TR valign="top"><TD></TD><TD>  ORDER=</TD></TR>
<TR valign="top"><TD></TD><TD> STYLE=</TD></TR>
<TR valign="top"><TD></TD><TD> VALUE=</TD></TR></TABLE></TD></TR>
<TR valign="top"><TD></TD><TD>BY statement</TD></TR>
<TR valign="top"><TD></TD><TD>GOPTIONS
statement options:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>  HSIZE=</TD></TR>
<TR valign="top"><TD></TD><TD>  VSIZE=</TD></TR></TABLE></TD></TR>
<TR valign="top"><TD></TD><TD>OPTIONS statement
option:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>  NOBYLINE</TD></TR></TABLE></TD></TR>
<TR valign="top"><TD></TD><TD>PATTERN statement option:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>  COLOR=</TD></TR></TABLE></TD></TR>
<TR valign="top"><TD></TD><TD>TITLE statement:



<TABLE cellpadding="6" cellspacing="2">
<TR valign="top"><TD></TD><TD>  #BYVAL</TD></TR></TABLE></TD></TR></TABLE>
<P> <B>Sample library member:</B> 
GR08N07
<P> This example uses a BY statement with the GCHART procedure
to produce a separate 3D vertical bar chart for each value of the BY variable
TYPE. The three charts, which are shown in <A href="#zgr08n04">Output for BY Value Corn</A>, <A href="#zr08n041">Output for BY Value Rice</A>,
and <A href="#zr08n042">Output for BY Value Wheat</A>
following the code, show leading grain producers for 1995 and 1996.
<P>The program suppresses the default BY lines and instead
uses #BYVAL in the TITLE statement text string to include the BY variable
value in the title for each chart.
<P>The AXIS1 statement that is assigned to the vertical
(response) axis is automatically applied to all three graphs generated by
the BY statement. This AXIS statement removes all the elements of the response
axis except the label. The same AXIS statement also includes an ORDER= option.
Because this option is applied to all the graphs, it ensures that they all
use the same scale of response values.
<P>Because no subgroups are specified and the PATTERNID=
option is omitted, the color specified in the single PATTERN statement is
used by all the bars.  
<P><B>Assign the libref and set the graphics environment.</B> HSIZE= and VSIZE= set the horizontal and vertical size of the graphics
output area.



<PRE>libname reflib '<I>SAS-data-library</I>';
goptions reset=global gunit=pct border cback=white
         colors=(black blue green red)
         ftitle=swissb ftext=swiss htitle=5
         htext=4 hsize=5in vsize=5in;</PRE>
<P>  <B>Create the data set REFLIB.GRAINLDR.</B>
REFLIB.GRAINLDR contains data about grain production in five countries for
1995 and 1996. The quantities in AMOUNT are in thousands of metric tons. MEGTONS
converts these quantities to millions of metric tons.



<PRE>data reflib.grainldr;
   length country $ 3 type $ 5;
   input year country $ type $ amount;
   megtons=amount/1000;
   datalines;
1995 BRZ  Wheat    1516
1995 BRZ  Rice     11236
1995 BRZ  Corn     36276
...<I>more data lines</I>...
1996 USA  Wheat    62099
1996 USA  Rice     7771
1996 USA  Corn     236064
;</PRE>
<P>  <B>Create a format for the values of COUNTRY.</B>



<PRE>proc format;
  value $country 'BRZ' = 'Brazil'
                 'CHN' = 'China'
                 'IND' = 'India'
                 'INS' = 'Indonesia'
                 'USA' = 'United States';
run;</PRE>
<P><B>Suppress the default BY-line and define a title
that includes the BY-value.</B> #BYVAL inserts the value of the BY variable
COUNTRY into the title of each report.  



<PRE>options nobyline;
title1 'Leading #byval(type) Producers'
        j=c '1995 and 1996';
footnote1 j=r h=3 'GR08N07 ';</PRE>
<P>  <B>Specify a color for the bars.</B>



<PRE>pattern1 color=green;</PRE>
<P>  <B>Define the axis characteristics for the response
axes. </B> ORDER= specifies the range of values for the response axes.
ANGLE=90 in the LABEL= option rotates the label 90 degrees. All the other
options remove axis elements. MAJOR=, MINOR=, and VALUE= remove the tick marks
and values. STYLE=0 removes the line. NOPLANE removes the 3D plane.



<PRE>axis1 order=(0 to 550 by 100)
      label=(angle=90 'Millions of Metric Tons')
      major=none
      minor=none
      value=none
      style=0
      noplane;</PRE>
<P>  <B>Define midpoint axis characteristics.</B>
SPLIT= defines the character that causes an automatic line break in the axis
values.



<PRE>axis2 label=none
      split=' ';</PRE>
<P>  <B>Sort data according to values of BY variable.</B> The data must be sorted before running PROC GCHART with the BY statement.



<PRE>proc sort data=reflib.grainldr out=temp;
     by type;
run;</PRE>
<P>  <B>Generate the vertical bar charts using a BY
statement.</B> The BY statement produces a chart for each value of SITE.
The FORMAT statement assigns the $COUNTRY. format to the chart variable. Assigning
AXIS1 to RAXIS= causes all three charts to have the same response axis.



<PRE>proc gchart data=temp (where=(megtons gt 31))
     gout=reflib.excat;
   by type;
   format country $country.;
   vbar3d country / sumvar=megtons
                    outside=sum
                    descending
                    shape=hexagon
                    width=8
                    coutline=black
                    cframe=grayaa
                    maxis=axis2
                    raxis=axis1 name='gr08n07';
run;
quit;</PRE>


 
<P>
<B><I><A name="zgr08n04">Output for BY Value Corn</A></I></B><BR>


<P><IMG border="0" src="./images/01329143.gif" vspace="12" alt="[IMAGE]">
<P>

<P>
<B><I><A name="zr08n041">Output for BY Value Rice</A></I></B><BR>


<P><IMG border="0" src="./images/01329144.gif" vspace="12" alt="[IMAGE]">
<P>

<P>
<B><I><A name="zr08n042">Output for BY Value Wheat</A></I></B><BR>


<P><IMG border="0" src="./images/01329145.gif" vspace="12" alt="[IMAGE]">
<P>

<P><!-- navigation -->
<P><TABLE cellpadding="0" cellspacing="0">
<TR valign="top">
<TD align="center">
<A href="z0724351.htm">
<IMG border="0" SRC="../common/images/cont1.gif"><BR><FONT size="-2">Chapter Contents</FONT></A></TD>
<TD align="center">
<A href="z8n06-ex.htm">
<IMG border="0" src="../common/images/prev1.gif"><BR><FONT size="-2">Previous</FONT></A></TD>
<TD align="center">
<A href="zods0-ex.htm">
<IMG border="0" SRC="../common/images/next1.gif"><BR><FONT size="-2">Next</FONT></A></TD>
<TD align="center">
<A href="#z8n04-ex">
<IMG border="0" SRC="../common/images/top1.gif"><BR><FONT size="-2">Top of Page</FONT></A></TD>
</TR></TABLE>
<P><FONT size=1><A href="../common/images/copyrite.htm">Copyright 1999 by SAS Institute Inc., Cary, NC, USA. All rights reserved.</A></FONT>
</BODY>
</HTML>