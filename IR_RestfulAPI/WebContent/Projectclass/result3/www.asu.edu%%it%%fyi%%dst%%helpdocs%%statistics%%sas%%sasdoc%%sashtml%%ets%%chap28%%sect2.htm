<HTML>
<HEAD>
<TITLE>FORECAST command</TITLE>
<LINK REL="STYLESHEET" TYPE="text/css" HREF="../sas.css">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<!--Navigation Panel-->
<TABLE BORDER="0" CELLPADDING="0">
<TR VALIGN="TOP">
  <TD ALIGN="CENTER">
  <A NAME="topofpage" HREF="index.htm">
  <IMG BORDER="0" SRC="../../common/images/cont1.gif" ALT="Chapter Contents" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Chapter Contents</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="sect1.htm"><IMG BORDER="0" SRC="../../common/images/prev1.gif" ALT="Previous" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Previous</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="../chap29/index.htm"><IMG BORDER="0" SRC="../../common/images/next1.gif" ALT="Next" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Next</FONT></A></TD>
</TR>
</TABLE>
<TABLE BGCOLOR="#CCCC99" WIDTH="100%" CELLPADDING=4>
<TR>
  <TD VALIGN=MIDDLE CLASS="chaphead"><I><FONT SIZE="2">Command Reference</FONT></I></TD>
</TR>
</TABLE><BR>
<P><!--End of Navigation Panel-->
<H1><FONT SIZE="5">FORECAST command  </FONT></H1>
<P><A NAME="idxtf70025">&#13;</A><A NAME="idxtf70026">&#13;</A><A NAME="idxtf70027">&#13;</A><A NAME="idxtf70028">&#13;</A><A NAME="idxtf70029">&#13;</A><A NAME="idxtf70030">&#13;</A>The <TT>forecast</TT> command invokes the Time Series Forecasting System.
The syntax is
<P><A NAME="idxtf70031">&#13;</A><A NAME="idxtf70032">&#13;</A><A NAME="idxtf70033">&#13;</A><A NAME="idxtf70034">&#13;</A><A NAME="idxtf70035">&#13;</A><A NAME="idxtf70036">&#13;</A><A NAME="idxtf70037">&#13;</A><A NAME="idxtf70038">&#13;</A><A NAME="idxtf70039">&#13;</A><A NAME="idxtf70040">&#13;</A><A NAME="idxtf70041">&#13;</A><A NAME="idxtf70042">&#13;</A><A NAME="idxtf70043">&#13;</A><DL>
<DT CLASS="ssbten"><B CLASS="ssbten">FORECAST PROJECT= <I>project name</I> <BR>DATA= <I>dataset name</I>          <BR>VAR= <I>time series variable name</I>     <BR>ID= <I>time id variable name</I>                         <BR>INTERVAL= <I>interval name</I>  <BR>STAT= <I>statistic</I>    <BR>CLIMIT= <I>integer</I>    <BR>HORIZON= <I>integer</I>   <BR>ENTRY= <I>name</I>   <BR>OUT= <I>dataset name</I>   <BR>REFIT                 <BR>REEVAL </B></DT>
<DD CLASS="sasop">If the <TT>forecast</TT> command is issued without arguments, the <TT>Time Series Forecasting</TT> window 
appears.  This is equivalent to selecting <TT>Time Series Forecasting System</TT> from the
<TT>Analysis</TT> submenu of the <TT>Solutions</TT> pull-down menu.
<BR><BR>Using the arguments, it is possible to:
<BR><BR><UL>
<LI> Bring up the system with information already filled into some of the fields.
<LI> Bring up the system starting at a different window than the default Time Series Forecasting window.
<LI> Run the system in unattended mode so that a task such as creating a forecast data set is accomplished without
any user interaction.  By submitting such  
commands repeatedly from a SAS/AF or SAS/EIS application, it is possible to do simulated
&#34;batch&#34; processing for many data sets or by-group processing for many subsets of a data set. 
You can create a project in unattended mode and later open it for inspection interactively.
You can also create a project interactively in order to set options, fit a model, or edit the
list of models, and then use this project later in unattended mode.  
A demo SAS/AF application is available. It is 
useful for running a batch of unattended forecasts using different series and/or datasets.  
To run it, issue the command <TT>AF C=SASHELP.FORCAST.FORCCMD.FRAME</TT>.  
Another interface to the <TT>forecast</TT> command is available using the 
<TT>Univariate Forecasting</TT> object in SAS/EIS software.
</UL>
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">PROJECT= <I>project name</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70009">&#13;</A>Specifies the name of the SAS catalog entry in which forecasting models and other 
results will be stored and from which previously  stored results are loaded into the 
forecasting system.
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">DATA= <I>dataset name</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70010">&#13;</A><A NAME="idxtf70011">&#13;</A>Specifies the name of the SAS data set containing the input data.
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">VAR= <I>time series variable name</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70012">&#13;</A><A NAME="idxtf70013">&#13;</A>Specifies the series variable name.  A numeric variable contained in  the data set.
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">ID= <I>time id variable name</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70014">&#13;</A><A NAME="idxtf70015">&#13;</A>Specifies the time ID variable name for the data set.  If the ID=  option is not 
specified, the system will attempt to locate the  variables named DATE, DATETIME, 
TIME in the data set specified by  the DATA= option.  However, it is recommended
that you specify the time ID variable whenever you are using the ENTRY= argument.
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">INTERVAL= <I>interval name</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70016">&#13;</A><A NAME="idxtf70017">&#13;</A>Specifies the time ID interval between observations in the data set.
Commonly used intervals are 
<TT>year, semiyear, qtr, month, semimonth, 
week, weekday, day, hour, minute</TT>, and <TT>second</TT>.
See <A HREF="../chap3/index.htm">Chapter 3, &#34;Date Intervals, Formats, and Functions,&#34;</A> for information on more complex interval specifications.
If the INTERVAL= option is not  specified, the system will attempt to 
determine the interval based  on the time ID variable.  However, it is recommended
that you specify the interval whenever you are using the ENTRY= argument.
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">STAT= <I>statistic</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70018">&#13;</A>Specifies the name of the goodness-of-fit statistic to be used as  the model 
selection criterion.  The default is rmse.  Valid names  are:
<BR><BR><DL>
<DT><TT>sse</TT>
<DD>Sum of Square Error
<DT><TT>mse</TT>
<DD>Mean Square Error
<DT><TT>rmse</TT>
<DD>Root Mean Square Error
<DT><TT>mae</TT>
<DD>Mean Absolute Error
<DT><TT>mape</TT>
<DD>Mean Absolute Percent Error
<DT><TT>aic</TT>
<DD>Akaike Information Criterion
<DT><TT>sbc</TT>
<DD>Schwarz Bayesian Information Criterion
<DT><TT>rsquare</TT>
<DD>R-Square
<DT><TT>adjrsq</TT>
<DD>Adjusted R-Square
<DT><TT>rwrsq</TT>
<DD>Random Walk R-Square
<DT><TT>arsq</TT>
<DD>Amemiya's Adjusted R-Square 
<DT><TT>apc</TT>
<DD>Amemiya's Prediction Criterion
</DL><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">CLIMIT= <I>integer</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70019">&#13;</A>An integer specifying the level of the confidence limits to be computed for the forecast.  
This integer represents a percentage, e.g., 925 indicates 92.5% confidence limits.  
The default is 95, i.e., 95% confidence limits.
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">HORIZON= <I>integer</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70020">&#13;</A>Specifies the number of periods into the future for which forecasts  will be computed. 
The default is 12 periods.  The maximum is 9999.
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">ENTRY= <I>name</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70021">&#13;</A>The name of an entry point into the system.  Valid names are:
<BR><BR><DL>
<DT><TT>main</TT>
<DD>Starts the system at the Time Series Forecasting Window (default).
<BR><BR><DT><TT>devmod</TT>
<DD>Starts the system at the Develop Models Window.
<BR><BR><DT><TT>viewmod</TT>
<DD>Starts the system at the Model Viewer Window.  Specify a project containing
a forecasting model using the PROJECT= option.  If a project containing a model is not
specified, the message &#34;No forecasting model to view&#34; appears.
<BR><BR><DT><TT>viewser</TT>
<DD>Starts the system at Time Series Viewer Window.
<BR><BR><DT><TT>autofit</TT>
<DD>Runs the system in unattended mode, fitting a forecasting model automatically and saving
it in a project.  If PROJECT= is not specified, the default project name SASUSER.FMSPROJ.PROJ 
is used.
<BR><BR><DT><TT>forecast</TT>
<DD>Runs the system in unattended mode to generate a forecast data set.  
The name of this data set is specified by the OUT= parameter.  
If OUT= is not specified, a window appears to
prompt for the name and label of the output data set.
If PROJECT= is not specified, the default project name SASUSER.FMSPROJ.PROJ is used.
If the project does not exist or does not contain a forecasting model
for the specified series, automatic
model fitting is performed and the forecast is computed using the automatically selected model.
If the project exists and contains a forecasting model for the specified series,
the forecast is computed using this model.  If the series covers a different time range
than it did when the project was created, use the REFIT or REEVAL keyword to reset the
time ranges.
</DL><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">OUT= <I>argument</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70022">&#13;</A>The one or two-level name of a SAS data set in which forecasts will be saved.  Use in  conjunction with 
ENTRY=FORECAST.  If omitted, the system prompts for the name of the forecast 
data set.
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">REFIT <I>keyword</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70023">&#13;</A>Refits a previously saved forecasting model using the current fit range, i.e.,
reestimates the model parameters.  Refitting also causes the model to be reevaluated (statistics of fit
recomputed), and causes the time ranges to be reset if the data range has changed, e.g., if new observations
have been added to the series.  This keyword has no effect if you do not use the PROJECT= argument to
reference an existing project containing a forecasting model.  Use the REFIT keyword if you have
added new data to the input series and you want to refit the forecasting model and update the 
forecast using the new time ranges.  Be sure to use the same project, data set, and series names
that you used previously.
<BR><BR></DD><DT CLASS="ssbten"><B CLASS="ssbten">REEVAL <I>keyword</I></B></DT>
<DD CLASS="sasop"><A NAME="idxtf70024">&#13;</A>Reevaluates a previously saved forecasting model using the current evaluation
range, i.e., 
recomputes the statistics of fit.  Reevaluating also causes the time ranges to be reset if the data
range has changed, e.g., if new observations have been added to the series. It does
not refit the model parameters.  This keyword has no effect if you also specify REFIT, or if you do not
use the PROJECT= argument to reference an existing project containing a forecasting model.  Use the REEVAL 
keyword if you have added new data to the input series and want to update your forecast using a previously 
fit forecasting model and the same project, data set, and series names that you used previously.
<BR><BR></DD>
</DL>
<H4><I>Examples</I></H4>
<P>The following command brings up the Time Series Forecasting window with
the data set name and series name filled in.  The time ID variable is also
filled in since the data set contains the variable DATE.  The interval is
filled in because the system recognizes that the observations are monthly.
<P><PRE>

   forecast data=sashelp.air var=air
</PRE>
<P>The following command brings up the Time Series Forecasting window with
the project, data set name, series, time ID, and interval fields filled
in, assuming that the project <I>samproj</I> was previously saved either
interactively or using unattended mode as depicted below.  
Previously fit models will
appear when the <TT>Develop Models</TT> or <TT>Manage Projects</TT> window
is opened.
<P><PRE>

   forecast project=samproj
</PRE>
<P>The following command runs the system in unattended mode, fitting a model
automatically, storing it in the project &#34;samproj&#34; in the default catalog
sasuser.fmsproj, and placing the forecasts in the data set work.sampout.
<P><PRE>

   forecast data=sashelp.workers var=electric id=date interval=month
   project=samproj entry=forecast out=sampout
</PRE>
<P>The following command assumes that a new month's data have been added to
the data set from the previous example and that an updated forecast is needed
using the previously fit model.  Time ranges are automatically updated
to include the new data since the REEVAL keyword is included.
Substitute REFIT for REEVAL if you want the
system to reestimate the model parameters.
<P><PRE>
     
   forecast data=sashelp.workers var=electric id=date interval=month
   project=samproj entry=forecast out=sampout reeval
</PRE>
<P>The following command brings up the model viewer using the project created
in the previous example and using 99
percent confidence limits in the forecast graph.
<P><PRE>
     
   forecast data=sashelp.workers var=electric id=date interval=month
   project=samproj entry=viewmod climit=99
</PRE>
<P>The final example illustrates using unattended mode with an existing project
which has been defined interactively in order to set options which cannot be
specified on the command line.
In this example, the goal is to add a model to the model
selection list, and to specify that all models in that list be fit and that all models
which are fit successfully be retained.
<P>First bring up the Time Series Forecasting Window
and specify a new project name, <TT>workproj</TT>.  Then select  
<TT>Develop Models</TT>, choosing <TT>sashelp.workers</TT> as the data set and 
<TT>masonry</TT> as the series.  Now select <TT>Model Selection List</TT> from the
<TT>Options</TT> pull-down menu.  In the Model Selection List window, click
<TT>Actions</TT>, then <TT>Add</TT>, then <TT>ARIMA Model</TT>.  Define the model
<TT>ARIMA(0,1,0)(0,1,0)s NOINT</TT> by setting the differencing value to 1 under
both <TT>ARIMA Options</TT> and <TT>Seasonal ARIMA Options</TT>.  Select <TT>OK</TT> to
save the model and <TT>OK</TT> to close the Model Selection List window.
Now select <TT>Automatic Fit</TT> from the <TT>Options</TT> pull-down.  In the
<TT>Automatic Model Selection Options</TT> window, select <TT>All autofit models
in selection list</TT> in the <TT>Models to fit</TT> radio box, and select <TT>All models</TT>
from the <TT>Models to keep</TT> combo box, then click <TT>OK</TT> to close the window.
Select <TT>Save Project</TT> from the <TT>File</TT> pull-down menu, and then close the
Develop Models window and the Time Series Forecasting window.  You now have a project
with a new model added to the selection list, options set for automatic model fitting,
and one series selected but no models fit.
<P>Now enter the command:
<PRE>
 
   forecast data=sashelp.workers var=electric id=date interval=month
   project=workproj entry=forecast out=workforc
</PRE>
<P>The system runs in unattended mode to update the project and create the forecast data
set <TT>workforc</TT>.  Check the messages in the <TT>log</TT> window to find out if the
run was successful and which model was fit.  To see the forecast data set, issue the
command <TT>viewtable workforc</TT>.  To see the contents of the project, bring up the
Time Series Forecasting Window, open the project <TT>workproj</TT>, and select 
<TT>Manage Projects</TT>.  You will see that the variable <TT>electric</TT> was added to the
project and has a forecasting model.  Select this row in the table and then select
<TT>List Models</TT> from the <TT>Tools</TT> pull-down menu.  You will see that all of the
models in the selection list which fit successfully are there, including the new model
you added to the selection list.
<P>
<!--Navigation Panel-->
<TABLE BORDER="0" CELLPADDING="0">
<TR VALIGN="TOP">
  <TD ALIGN="CENTER">
  <A HREF="index.htm">
  <IMG BORDER="0" SRC="../../common/images/cont1.gif" ALT="Chapter Contents" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Chapter Contents</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="sect1.htm"><IMG BORDER="0" SRC="../../common/images/prev1.gif" ALT="Previous" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Previous</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="../chap29/index.htm"><IMG BORDER="0" SRC="../../common/images/next1.gif" ALT="Next" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Next</FONT></A></TD>
  <TD ALIGN=CENTER>
  <A HREF="#topofpage">
  <IMG BORDER="0" SRC="../../common/images/top1.gif" ALT="Top" WIDTH="99" HEIGHT="16"><BR><FONT SIZE="-2">Top</FONT></A></TD>
</TR>
</TABLE>
<P><!--End of Navigation Panel-->
<P><FONT SIZE="1"><A HREF="../../common/images/copyrite.htm">Copyright &copy; 1999 by SAS Institute Inc., Cary, NC, USA. All rights reserved.</A></FONT>
</BODY>
</HTML>
